<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>12.20. Stored actions</title></head>
<STYLE TYPE="text/css">
<!--
.oval, .oval TD
{
background-image:url('../doc_images/ovoid.png');
color:white;
}
.wiarrow, .wiarrow TD
{
background-image:url('../doc_images/wiarrow.png');
color:white;
}
.rbarrow, .rbarrow TD
{
background-image:url('../doc_images/rbarrow.png');
color:white;
}
-->
</STYLE>
<body bgcolor="#ffffff">
<!-- SEARCH TITLE "Anteaters" -->
<!-- SEARCH SECTION "Ex 205" -->
<!-- SEARCH SORT "Ex 012-020-205" -->
<font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><table CELLPADDING=0 CELLSPACING=0 width="100%" bgcolor="#000000"><tr><TD width=38px height=26px align="center" valign="center"><a href=doc191.html border=0><img border=0 src=../doc_images/Hookleft.png id="hookleft" style="height: 24px; width: 32px;" border=0></a></td><td halign="left" valign="center" CELLPADDING=0 CELLSPACING=0><a href=../chap12.html STYLE="text-decoration: none"><font color="#FFFFFF" size=2>Chapter 12: Advanced Actions</font></a></td><TD width=56px height=26px align="right" valign="center"><a href=../index.html border=0><img border=0 src=../doc_images/Hookup.png id="hookup" style="height: 24px; width: 24px;" border=0></a><a href=doc193.html border=0><img border=0 src=../doc_images/Hookright.png id="hookright" style="height: 24px; width: 32px;" border=0></a></td></tr></table><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><TD height=8px halign="center" valign="center"></td></tr></table><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><TD width=38px halign="center" valign="center"></td><td halign="left" valign="center" CELLPADDING=0 CELLSPACING=0><font color="#000000" size="3"><b>12.20. Stored actions</b></font></td></tr></table>
<p>
<p>As we have seen, to describe an action fully takes a complicated little bundle of information - we need to know what is to be done, who will do it, and what it will be done to. There are times when we would like to remember an action and look back on it later (perhaps many turns later, after many other actions have taken effect) - but this is not easy to do with only the techniques we have seen so far. There are quite a few cases to get right, and it would be easy to not store quite enough of the details.
<p>
<p>Fortunately, Inform provides a kind of value called &quot;stored action&quot; which can do all of this automatically. As with most other kinds of value, stored actions can be held in variables, &quot;let&quot; values, properties or table columns. For example:
<p>
<blockquote><font color="#000080">The best idea yet is a stored action that varies.
</font></blockquote><p>
<p>
<p>creates a variable called &quot;the best idea yet&quot; which holds a stored action. This will normally be created holding the default value - the player waiting - but can instead be set explicitly:
<p>
<blockquote><font color="#000080">The best idea yet is the action of pushing the button.
</font></blockquote><p>
<p>
<p>Note the words &quot;action of...&quot;, which convert any sufficiently exact description of an action into its stored action form.
<p>
<p>In rules and phrases, we can always obtain the action currently going on (if there is one) with the value &quot;current action&quot;:
<p>
<blockquote><font color="#000080">let the present whim be the current action;
</font></blockquote><p>
<p>
<p>Moreover, just as we can &quot;try&quot; any action, so we can also try a stored one:
<p>
<blockquote><font color="#000080">try the present whim;
<br>silently try the present whim;
</font></blockquote><p>
<p>
<p>would each work in the natural way. A stored action can do anything that actions can do: in particular, they remember, if necessary, the exact wording of the player's command at the time they were stored - so that even actions like &quot;looking up 'x100' in the code book&quot; will work if stored and tried on some future turn.
<p>
<p>As with any other kind of value, we can also say a stored action, and this produces a fairly natural description of what the action is:
<p>
<blockquote><font color="#000080">Before doing something in the presence of the bearded psychiatrist: say &quot;'Zo, the subject wishes to engage in [the current action]. Zis is very interesting.'&quot;
</font></blockquote><p>
<p>
<p>will produce text such as:
<p>
<blockquote><font color="#000080">&quot;So, the subject vishes to engage in rubbing the fireman's pole. Zis is very interesting.&quot;
</font></blockquote><p>
<p>
<p>One of Inform's most convenient features is its ability to test if the action being processed matches vague or complicated descriptions of whole classes of actions. Now, it would not make sense to write
<p>
<blockquote><font color="#000080">if the best idea yet is the action of taking something, ...
</font></blockquote><p>
<p>
<p>because &quot;action of ...&quot; has to make an exact action, which clearly this is not: so Inform will produce a problem message if we try. But we do not need to, because Inform also allows us to compare a stored action against any description of an action, however vague:
<p>
<blockquote><font color="#000080">if the best idea yet is taking something, ...
<br>if the best idea yet is doing something to the lever, ...
</font></blockquote><p>
<p>
<p>When dealing with stored actions, we sometimes want to know what they are dealing with. We can extract this information using the following phrases:
<p>
<blockquote><font color="#000080">action-name part of S
<br>noun part of S
<br>second noun part of S
<br>actor part of S
</font></blockquote><p>
<p>
<p>For example, if S is &quot;Algy trying throwing the brick at Biggles&quot; then saying these four values will produce
<p>
<blockquote><font color="#000080">throwing it at
<br>brick
<br>Biggles
<br>Algy
</font></blockquote><p>
<p>
<p>Should the action be one which does not involve objects, the noun and second noun may be &quot;nothing&quot;: for instance if S is &quot;setting the dial to 3417&quot; then the noun part of S is the dial but the second noun part is nothing. (This has to be true, as otherwise Inform could never know what kind of value &quot;the noun part of S&quot; would have.)
<p>
<p>As a convenience, the condition
<p>
<blockquote><font color="#000080">if S involves X, ...
</font></blockquote><p>
<p>
<p>is true if the object X appears as any of the actor, the noun or the second noun: for instance,
<p>
<blockquote><font color="#000080">if the current action involves Algy
</font></blockquote><p>
<p>
<p>would be true for &quot;give revolver to Algy&quot;, &quot;Algy trying flying the Sopwith Camel&quot;, &quot;examine Algy&quot; and so on, but false for &quot;ask Raymond about secret airfield&quot;.
<p>
<p><hr><p>
<a name="e239"><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><td halign="left" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="oval"><TD width=38px height=30px align="left" valign="center"><a href=ex239.html#e239 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><b>202</b></div></a></TD></TR></TABLE></td><td CELLPADDING=0 CELLSPACING=0 halign="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><a href=ex239.html#e239 STYLE="text-decoration: none"><img border="0" style="height: 15px; width: 13px;" alt="*" src='../doc_images/asterisk.png'><b><font color="#505050">&nbsp;Example&nbsp;</font> <font color="#000000"> Bosch</font></b></a><br>Creating a list of actions that will earn the player points, and using this both to change the score and to give FULL SCORE reports.<p></td><td halign="right" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="rbarrow"><TD width=38px height=30px align="left" valign="center"><a  href=Rex239.html#e239 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><i>RB</i></div></a></TD></TR></TABLE></td></tr></table>
<a name="e372"><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><td halign="left" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="oval"><TD width=38px height=30px align="left" valign="center"><a href=ex372.html#e372 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><b>203</b></div></a></TD></TR></TABLE></td><td CELLPADDING=0 CELLSPACING=0 halign="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><a href=ex372.html#e372 STYLE="text-decoration: none"><img border="0" style="height: 15px; width: 13px;" alt="*" src='../doc_images/asterisk.png'><b><font color="#505050">&nbsp;Example&nbsp;</font> <font color="#000000"> Cactus Will Outlive Us All</font></b></a><br>For every character besides the player, there is an action that will cause that character to wither right up and die.<p></td><td halign="right" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="rbarrow"><TD width=38px height=30px align="left" valign="center"><a  href=Rex372.html#e372 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><i>RB</i></div></a></TD></TR></TABLE></td></tr></table>
<a name="e241"><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><td halign="left" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="oval"><TD width=38px height=30px align="left" valign="center"><a href=ex241.html#e241 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><b>204</b></div></a></TD></TR></TABLE></td><td CELLPADDING=0 CELLSPACING=0 halign="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><a href=ex241.html#e241 STYLE="text-decoration: none"><img border="0" style="height: 15px; width: 13px;" alt="*" src='../doc_images/asterisk.png'><img border="0" style="height: 15px; width: 13px;" alt="*" src='../doc_images/asterisk.png'><b><font color="#505050">&nbsp;Example&nbsp;</font> <font color="#000000"> Actor's Studio</font></b></a><br>A video camera that records actions performed in its presence, and plays them back with time-stamps.<p></td><td halign="right" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="rbarrow"><TD width=38px height=30px align="left" valign="center"><a  href=Rex241.html#e241 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><i>RB</i></div></a></TD></TR></TABLE></td></tr></table>
<!-- EXAMPLE START -->
<a name="e311"><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><td halign="left" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="oval"><TD width=38px height=30px align="left" valign="center"><a href=doc192.html#e311 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><b>205</b></div></a></TD></TR></TABLE></td><td CELLPADDING=0 CELLSPACING=0 halign="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><a href=doc192.html#e311 STYLE="text-decoration: none"><img border="0" style="height: 15px; width: 13px;" alt="*" src='../doc_images/asterisk.png'><img border="0" style="height: 15px; width: 13px;" alt="*" src='../doc_images/asterisk.png'><b><font color="#505050">&nbsp;<b>Example</b>&nbsp;</font> <font color="#000000"> Anteaters</font></b></a><br>The player carries a gizmo that is able to record actions performed by the player, then force him to repeat them when the gizmo is dropped. This includes storing actions that apply to topics, as in "look up anteater colonies in the guide".<p></td><td halign="right" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="rbarrow"><TD width=38px height=30px align="left" valign="center"><a  href=Rex311.html#e311 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><i>RB</i></div></a></TD></TR></TABLE></td></tr></table>
<table border=0 bgcolor="#f0f0f0" width=100%><tr><td><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2>
<p>
<blockquote><font color="#000080"><script language="JavaScript">
function pasteCode293(code) {
    var myProject = external.Project;

    myProject.selectView('source');
    myProject.pasteCode(' [=0x0022=]Anteaters[=0x0022=][=0x000A=][=0x000A=]A book is a kind of thing. Understand [=0x0022=]book[=0x0022=] as a book. A book has a table-name called the contents.[=0x000A=][=0x000A=]Report consulting a book about:[=0x000A=][=0x0009=]say [=0x0022=]You flip through [the noun], but find no reference to [the topic understood].[=0x0022=] instead.[=0x000A=][=0x000A=]Instead of consulting a book about a topic listed in the contents of the noun:[=0x000A=][=0x0009=]say [=0x0022=][reply entry][paragraph break][=0x0022=].[=0x000A=][=0x000A=]The Guide to Desert Fauna is a book. The contents of the Guide is the Table of Critters.[=0x000A=][=0x000A=]Table of Critters[=0x000A=]topic[=0x0009=]reply[=0x000A=][=0x0022=]spines[=0x0022=][=0x0009=][=0x0022=]You flip through the Guide for a while and eventually realise that spines are flora, not fauna.[=0x0022=][=0x000A=][=0x0022=]anteater colonies[=0x0022=][=0x0009=][=0x0022=]The giant anteater, which grows to six feet in size and can kill a jaguar, is a solitary animal, found in many habitats, including grasslands, deciduous forests and rainforests. It does not form colonies. That[=0x0027=]s ants. They[=0x0027=]re actually quite easy to tell apart.[=0x0022=][=0x000A=][=0x000A=]Death Valley is a room. The Guide is in the Valley.[=0x000A=][=0x000A=]The gizmo is in Death Valley. The gizmo has a stored action called idea. The description of the gizmo is [=0x0022=]The gizmo is hard to describe, but it projects an idea of [idea].[=0x0022=][=0x000A=][=0x000A=]Before when the player carries the gizmo and the idea of the gizmo is waiting:[=0x000A=][=0x0009=]say [=0x0022=][The gizmo] eagerly soaks up the whole idea of [the current action].[=0x0022=];[=0x000A=][=0x0009=]now the idea of the gizmo is the current action.[=0x000A=][=0x000A=]After dropping the gizmo:[=0x000A=][=0x0009=]say [=0x0022=]The percussion of the fall seems to have shaken the gizmo[=0x0027=]s idea loose! There[=0x0027=]s nothing for it now but [idea of the gizmo].[=0x0022=];[=0x000A=][=0x0009=]try the idea of the gizmo;[=0x000A=][=0x0009=]now the idea of the gizmo is the action of waiting.[=0x000A=][=0x000A=]Test me with [=0x0022=]get guide / look up spines in guide / x gizmo / get gizmo / i / x gizmo / drop gizmo / get gizmo / look up anteater colonies in guide / x gizmo / drop gizmo[=0x0022=].[=0x000A=]');
}
</script>
<a href="javascript:pasteCode293()"><img border=0 src=../doc_images/paste.png></a>  &quot;Anteaters&quot;
</font></blockquote><p>
<p>
<blockquote><font color="#000080">A book is a kind of thing. Understand &quot;book&quot; as a book. A book has a table-name called the contents.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Report consulting a book about:
<br>&nbsp;&nbsp;&nbsp;&nbsp;say &quot;You flip through [the noun], but find no reference to [the topic understood].&quot; instead.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Instead of consulting a book about a topic listed in the contents of the noun:
<br>&nbsp;&nbsp;&nbsp;&nbsp;say &quot;[reply entry][paragraph break]&quot;.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">The Guide to Desert Fauna is a book. The contents of the Guide is the Table of Critters.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Table of Critters
<br><table border="0" valign="top" cellpadding="0" cellspacing="0"><tr><td valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2 color="#000080">topic</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2 color="#000080">reply</font>&nbsp;&nbsp;&nbsp;</td>
</tr><tr><td valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2 color="#000080">&quot;spines&quot;</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2 color="#000080">&quot;You flip through the Guide for a while and eventually realise that spines are flora, not fauna.&quot;</font>&nbsp;&nbsp;&nbsp;</td>
</tr><tr><td valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2 color="#000080">&quot;anteater colonies&quot;</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2 color="#000080">&quot;The giant anteater, which grows to six feet in size and can kill a jaguar, is a solitary animal, found in many habitats, including grasslands, deciduous forests and rainforests. It does not form colonies. That's ants. They're actually quite easy to tell apart.&quot;</font>&nbsp;&nbsp;&nbsp;</td>
</tr></table>
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Death Valley is a room. The Guide is in the Valley.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">The gizmo is in Death Valley. The gizmo has a stored action called idea. The description of the gizmo is &quot;The gizmo is hard to describe, but it projects an idea of [idea].&quot;
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Before when the player carries the gizmo and the idea of the gizmo is waiting:
<br>&nbsp;&nbsp;&nbsp;&nbsp;say &quot;[The gizmo] eagerly soaks up the whole idea of [the current action].&quot;;
<br>&nbsp;&nbsp;&nbsp;&nbsp;now the idea of the gizmo is the current action.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">After dropping the gizmo:
<br>&nbsp;&nbsp;&nbsp;&nbsp;say &quot;The percussion of the fall seems to have shaken the gizmo's idea loose! There's nothing for it now but [idea of the gizmo].&quot;;
<br>&nbsp;&nbsp;&nbsp;&nbsp;try the idea of the gizmo;
<br>&nbsp;&nbsp;&nbsp;&nbsp;now the idea of the gizmo is the action of waiting.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Test me with &quot;get guide / look up spines in guide / x gizmo / get gizmo / i / x gizmo / drop gizmo / get gizmo / look up anteater colonies in guide / x gizmo / drop gizmo&quot;.
</font></blockquote><p>
<table CELLPADDING=0 CELLSPACING=0 width="100%" height=18><tr><td width="100%"> </td><td width=18 align="left" bgcolor="#000000"><a href=doc192.html><img src=../doc_images/Hookclose.png id="hookclose" style="height: 17px; width: 17px;" border="0"></a></td><td width=4></td></tr></table></td></tr></table><p>
<!-- EXAMPLE END -->
<p><hr><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><td width="33%" align="left"><a href=doc191.html border=0 STYLE="text-decoration: none"><font color="808080" size="2">Previous</font></a></td><td width="33%" align="center"><a href=../index.html border=0 STYLE="text-decoration: none"><font color="808080" size="2">Contents</font></a></td><td width="33%" align="right"><a href=doc193.html border=0 STYLE="text-decoration: none"><font color="808080" size="2">Next</font></a></td></tr></table></font></body></html>
