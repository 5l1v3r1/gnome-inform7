<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>16.5. The text token</title></head>
<STYLE TYPE="text/css">
<!--
.oval, .oval TD
{
background-image:url('../doc_images/ovoid.png');
color:white;
}
.wiarrow, .wiarrow TD
{
background-image:url('../doc_images/wiarrow.png');
color:white;
}
.rbarrow, .rbarrow TD
{
background-image:url('../doc_images/rbarrow.png');
color:white;
}
-->
</STYLE>
<body bgcolor="#ffffff">
<!-- SEARCH TITLE "Nameless" -->
<!-- SEARCH SECTION "Ex 263" -->
<!-- SEARCH SORT "Ex 016-005-263" -->
<font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><table CELLPADDING=0 CELLSPACING=0 width="100%" bgcolor="#000000"><tr><TD width=38px height=26px align="center" valign="center"><a href=doc246.html border=0><img border=0 src=../doc_images/Hookleft.png id="hookleft" style="height: 24px; width: 32px;" border=0></a></td><td halign="left" valign="center" CELLPADDING=0 CELLSPACING=0><a href=../chap16.html STYLE="text-decoration: none"><font color="#FFFFFF" size=2>Chapter 16: Understanding</font></a></td><TD width=56px height=26px align="right" valign="center"><a href=../index.html border=0><img border=0 src=../doc_images/Hookup.png id="hookup" style="height: 24px; width: 24px;" border=0></a><a href=doc248.html border=0><img border=0 src=../doc_images/Hookright.png id="hookright" style="height: 24px; width: 32px;" border=0></a></td></tr></table><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><TD height=8px halign="center" valign="center"></td></tr></table><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><TD width=38px halign="center" valign="center"></td><td halign="left" valign="center" CELLPADDING=0 CELLSPACING=0><font color="#000000" size="3"><b>16.5. The text token</b></font></td></tr></table>
<p>
<p>Most actions involve items: taking a vase, perhaps. As we shall see, they might also involve values, or a mixture of the two: turning a dial to 17 would involve both a thing (the dial) and a number (17). A few of Inform's built-in actions, however, can act on any text at all. For instance, asking the Sybil about the Persian army would involve a thing (the Sybil) and some text (&quot;Persian army&quot;). Inform does not try to understand automatically what that text might mean, or to relate it to any items, places or values it knows about: instead, Inform leaves that to the specific story to work out for itself, since the answer is bound to depend on the context. (In the chapter on Tables, we saw ways to compile tables of responses to particular topics of conversation.)
<p>
<p>The token for &quot;accept any text here&quot; is just &quot;[text]&quot;. For instance, if we create an action with:
<p>
<blockquote><font color="#000080">Getting help about is an action applying to one topic.
</font></blockquote><p>
<p>
<p>We can then provide grammar for this action like so:
<p>
<blockquote><font color="#000080">Understand &quot;help on [text]&quot; as getting help about.
</font></blockquote><p>
<p>
<p>When text like this is successfully matched, it is placed in a value called &quot;the topic understood&quot;. (The term &quot;topic&quot; is used traditionally, really: most of the times one needs this feature, it's for a topic of conversation, or a topic being looked up in a book.)
<p>
<p><hr><p>
<a name="e54"><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><td halign="left" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="oval"><TD width=38px height=30px align="left" valign="center"><a href=ex54.html#e54 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><b>262</b></div></a></TD></TR></TABLE></td><td CELLPADDING=0 CELLSPACING=0 halign="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><a href=ex54.html#e54 STYLE="text-decoration: none"><img border="0" style="height: 15px; width: 13px;" alt="*" src='../doc_images/asterisk.png'><b><font color="#505050">&nbsp;Example&nbsp;</font> <font color="#000000"> Ish.</font></b></a><br>A (very) simple HELP command, using tokens to accept and interpret the player's  text whatever it might be.<p></td><td halign="right" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="rbarrow"><TD width=38px height=30px align="left" valign="center"><a  href=Rex54.html#e54 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><i>RB</i></div></a></TD></TR></TABLE></td></tr></table>
<!-- EXAMPLE START -->
<a name="e77"><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><td halign="left" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="oval"><TD width=38px height=30px align="left" valign="center"><a href=doc247.html#e77 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><b>263</b></div></a></TD></TR></TABLE></td><td CELLPADDING=0 CELLSPACING=0 halign="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><a href=doc247.html#e77 STYLE="text-decoration: none"><img border="0" style="height: 15px; width: 13px;" alt="*" src='../doc_images/asterisk.png'><img border="0" style="height: 15px; width: 13px;" alt="*" src='../doc_images/asterisk.png'><b><font color="#505050">&nbsp;<b>Example</b>&nbsp;</font> <font color="#000000"> Nameless</font></b></a><br>ASKing someone about an object rather than about a topic.<p></td><td halign="right" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="rbarrow"><TD width=38px height=30px align="left" valign="center"><a  href=Rex77.html#e77 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><i>RB</i></div></a></TD></TR></TABLE></td></tr></table>
<table border=0 bgcolor="#f0f0f0" width=100%><tr><td><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2>
<p>
<p>By default, ASK SOMEONE ABOUT... applies only to a text token. We might want also to offer the player the option of asking characters about pieces of physical evidence. This example implements an ASK PERSON ABOUT THING command that is mostly synonymous with SHOW, with the added nuance that the player can ask about things that are not currently visible, as long as he has encountered them at some time in the past.
<p>
<blockquote><font color="#000080"><script language="JavaScript">
function pasteCode350(code) {
    var myProject = external.Project;

    myProject.selectView('source');
    myProject.pasteCode('[=0x0022=]Nameless[=0x0022=][=0x000A=][=0x000A=]The Black Chamber is a room. [=0x0022=]Despite its menacing name, it is quite an ordinary room, underlying the post office above. Here letters are brought each day, unsealed, transcribed, resealed, and sent again on their way; their contents then analyzed and recorded.[=0x0022=][=0x000A=][=0x000A=]The Nameless Advisor is a woman in the Black Chamber. [=0x0022=]A woman whose name has never been disclosed to you sits at the window, writing numbers on a sheet of paper.[=0x0022=] The Advisor carries a sheet of paper. Understand [=0x0022=]woman[=0x0022=] as the nameless advisor.[=0x000A=][=0x000A=]The player carries a letter from the emperor. The description of the letter is [=0x0022=]Though its origin is obvious, its meaning is secret: the letters are an inexplicable jumble.[=0x0022=][=0x000A=][=0x000A=][Now we create our new action, [=0x0022=]interrogating it about[=0x0022=]. We write the grammar lines so that we can show any object in sight to someone, but also ask someone about any object that we have ever interacted with in the game, whether it is currently visible or not.][=0x000A=][=0x000A=]A thing can be known or unknown. The Nameless Advisor is known.[=0x000A=][=0x000A=]Understand [=0x0022=]ask [someone] about [any known thing][=0x0022=] as interrogating it about. interrogating it about is an action applying to two visible things.[=0x000A=][=0x000A=][Now we replace and redirect the showing action. This gets rid of the requirement in the default library that the player be holding anything he shows to another character:][=0x000A=][=0x000A=]Understand the commands [=0x0022=]show[=0x0022=] and [=0x0022=]display[=0x0022=] and [=0x0022=]present[=0x0022=] as something new.[=0x000A=][=0x000A=]Understand [=0x0022=]show [something] to [someone][=0x0022=] or [=0x0022=]display [something] to [someone][=0x0022=] or [=0x0022=]present [something] to [someone][=0x0022=] as interrogating it about (with nouns reversed). Understand [=0x0022=]show [someone] [something][=0x0022=] as interrogating it about.[=0x000A=][=0x000A=][This bit keeps track of what the player has seen, for the purposes of [=0x0022=]any known thing[=0x0022=]:][=0x000A=][=0x000A=]Before printing the name of something (called the target): now the target is known.[=0x000A=][=0x000A=][Here we define what happens by default when we interrogate someone about something; we use the same response we get to asking someone about something that isn[=0x0027=]t otherwise interesting:][=0x000A=][=0x000A=]Carry out interrogating someone about something:[=0x000A=][=0x0009=]say [=0x0022=]There is no reply.[=0x0022=][=0x000A=][=0x000A=][Now redirect all asking to a topic table, and all interrogating to an object table:][=0x000A=][=0x000A=]Instead of asking Nameless Advisor about a topic listed in the Table of Nameless Advisor Topics:[=0x000A=][=0x0009=]say [=0x0022=][reply entry][paragraph break][=0x0022=].[=0x000A=][=0x000A=]Instead of interrogating Nameless Advisor about an item listed in the Table of Nameless Advisor Items:[=0x000A=][=0x0009=]say [=0x0022=][reply entry][paragraph break][=0x0022=].[=0x000A=][=0x000A=]Table of Nameless Advisor Items[=0x000A=]item[=0x0009=]reply[=0x000A=]letter[=0x0009=][=0x0022=][=0x0027=]It is enciphered,[=0x0027=] she remarks[if the advisor can see the letter], glancing over the contents[otherwise], after you have offered a detailed description[end if]. [=0x0027=]A substitution cipher of some complexity, I believe.[=0x0027=][=0x0022=][=0x000A=]Advisor[=0x0009=][=0x0022=]She listens to your inquiries about her identity and parentage with a placid smile, but does not answer.[=0x0022=][=0x000A=][=0x000A=]Table of Nameless Advisor Topics[=0x000A=]topic[=0x0009=]reply[=0x000A=][=0x0022=]cipher[=0x0022=][=0x0009=][=0x0022=][=0x0027=]I know many dozens of ciphers,[=0x0027=] she replies, smiling in a disquieting way.[=0x0022=][=0x000A=][=0x0022=]substitution cipher[=0x0022=][=0x0009=][=0x0022=][=0x0027=]One letter is allowed to stand for another,[=0x0027=] she explains, folding her hands together patiently. The backs of both hands are tattooed with silvery stars.[=0x0022=][=0x000A=][=0x000A=][And just so that we can test what happens when asking someone about something out of sight:][=0x000A=][=0x000A=]The safe box is a container in the Chamber. It is fixed in place. It is openable and closed.[=0x000A=][=0x000A=][...and something unknown:][=0x000A=][=0x000A=]The poisonous apple is a thing.[=0x000A=][=0x000A=]Test me with [=0x0022=]test sight / test knowledge[=0x0022=].[=0x000A=][=0x000A=]Test sight with [=0x0022=]i / x letter / ask Nameless Advisor about cipher / show cipher to Nameless Advisor / ask Nameless Advisor about the letter / show the letter to Nameless Advisor / show Nameless Advisor the letter[=0x0022=].[=0x000A=][=0x000A=]Test knowledge with [=0x0022=]open safe box / put letter in safe box / close safe box / ask Nameless Advisor about the letter / show the letter to Nameless Advisor / ask Nameless Advisor about the apple[=0x0022=].[=0x000A=]');
}
</script>
<a href="javascript:pasteCode350()"><img border=0 src=../doc_images/paste.png></a> &quot;Nameless&quot;
</font></blockquote><p>
<p>
<blockquote><font color="#000080">The Black Chamber is a room. &quot;Despite its menacing name, it is quite an ordinary room, underlying the post office above. Here letters are brought each day, unsealed, transcribed, resealed, and sent again on their way; their contents then analyzed and recorded.&quot;
</font></blockquote><p>
<p>
<blockquote><font color="#000080">The Nameless Advisor is a woman in the Black Chamber. &quot;A woman whose name has never been disclosed to you sits at the window, writing numbers on a sheet of paper.&quot; The Advisor carries a sheet of paper. Understand &quot;woman&quot; as the nameless advisor.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">The player carries a letter from the emperor. The description of the letter is &quot;Though its origin is obvious, its meaning is secret: the letters are an inexplicable jumble.&quot;
</font></blockquote><p>
<p>
<p>Now we create our new action, &quot;interrogating it about&quot;. We write the grammar lines so that we can show any object in sight to someone, but also ask someone about any object that we have ever interacted with in the game, whether it is currently visible or not.
<p>
<blockquote><font color="#000080">A thing can be known or unknown. The Nameless Advisor is known.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Understand &quot;ask [someone] about [any known thing]&quot; as interrogating it about. interrogating it about is an action applying to two visible things.
</font></blockquote><p>
<p>
<p>Now we replace and redirect the showing action. This gets rid of the requirement in the default library that the player be holding anything he shows to another character:
<p>
<blockquote><font color="#000080">Understand the commands &quot;show&quot; and &quot;display&quot; and &quot;present&quot; as something new.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Understand &quot;show [something] to [someone]&quot; or &quot;display [something] to [someone]&quot; or &quot;present [something] to [someone]&quot; as interrogating it about (with nouns reversed). Understand &quot;show [someone] [something]&quot; as interrogating it about.
</font></blockquote><p>
<p>
<p>This bit keeps track of what the player has seen, for the purposes of &quot;any known thing&quot;:
<p>
<blockquote><font color="#000080">Before printing the name of something (called the target): now the target is known.
</font></blockquote><p>
<p>
<p>Here we define what happens by default when we interrogate someone about something; we use the same response we get to asking someone about something that isn't otherwise interesting:
<p>
<blockquote><font color="#000080">Carry out interrogating someone about something:
<br>&nbsp;&nbsp;&nbsp;&nbsp;say &quot;There is no reply.&quot;
</font></blockquote><p>
<p>
<p>Now redirect all asking to a topic table, and all interrogating to an object table:
<p>
<blockquote><font color="#000080">Instead of asking Nameless Advisor about a topic listed in the Table of Nameless Advisor Topics:
<br>&nbsp;&nbsp;&nbsp;&nbsp;say &quot;[reply entry][paragraph break]&quot;.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Instead of interrogating Nameless Advisor about an item listed in the Table of Nameless Advisor Items:
<br>&nbsp;&nbsp;&nbsp;&nbsp;say &quot;[reply entry][paragraph break]&quot;.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Table of Nameless Advisor Items
<br><table border="0" valign="top" cellpadding="0" cellspacing="0"><tr><td valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2 color="#000080">item</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2 color="#000080">reply</font>&nbsp;&nbsp;&nbsp;</td>
</tr><tr><td valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2 color="#000080">letter</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2 color="#000080">&quot;'It is enciphered,' she remarks[if the advisor can see the letter], glancing over the contents[otherwise], after you have offered a detailed description[end if]. 'A substitution cipher of some complexity, I believe.'&quot;</font>&nbsp;&nbsp;&nbsp;</td>
</tr><tr><td valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2 color="#000080">Advisor</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2 color="#000080">&quot;She listens to your inquiries about her identity and parentage with a placid smile, but does not answer.&quot;</font>&nbsp;&nbsp;&nbsp;</td>
</tr></table>
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Table of Nameless Advisor Topics
<br><table border="0" valign="top" cellpadding="0" cellspacing="0"><tr><td valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2 color="#000080">topic</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2 color="#000080">reply</font>&nbsp;&nbsp;&nbsp;</td>
</tr><tr><td valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2 color="#000080">&quot;cipher&quot;</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2 color="#000080">&quot;'I know many dozens of ciphers,' she replies, smiling in a disquieting way.&quot;</font>&nbsp;&nbsp;&nbsp;</td>
</tr><tr><td valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2 color="#000080">&quot;substitution cipher&quot;</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2 color="#000080">&quot;'One letter is allowed to stand for another,' she explains, folding her hands together patiently. The backs of both hands are tattooed with silvery stars.&quot;</font>&nbsp;&nbsp;&nbsp;</td>
</tr></table>
</font></blockquote><p>
<p>
<p>And just so that we can test what happens when asking someone about something out of sight:
<p>
<blockquote><font color="#000080">The safe box is a container in the Chamber. It is fixed in place. It is openable and closed.
</font></blockquote><p>
<p>
<p>...and something unknown:
<p>
<blockquote><font color="#000080">The poisonous apple is a thing.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Test me with &quot;test sight / test knowledge&quot;.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Test sight with &quot;i / x letter / ask Nameless Advisor about cipher / show cipher to Nameless Advisor / ask Nameless Advisor about the letter / show the letter to Nameless Advisor / show Nameless Advisor the letter&quot;.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Test knowledge with &quot;open safe box / put letter in safe box / close safe box / ask Nameless Advisor about the letter / show the letter to Nameless Advisor / ask Nameless Advisor about the apple&quot;.
</font></blockquote><p>
<table CELLPADDING=0 CELLSPACING=0 width="100%" height=18><tr><td width="100%"> </td><td width=18 align="left" bgcolor="#000000"><a href=doc247.html><img src=../doc_images/Hookclose.png id="hookclose" style="height: 17px; width: 17px;" border="0"></a></td><td width=4></td></tr></table></td></tr></table><p>
<!-- EXAMPLE END -->
<p><hr><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><td width="33%" align="left"><a href=doc246.html border=0 STYLE="text-decoration: none"><font color="808080" size="2">Previous</font></a></td><td width="33%" align="center"><a href=../index.html border=0 STYLE="text-decoration: none"><font color="808080" size="2">Contents</font></a></td><td width="33%" align="right"><a href=doc248.html border=0 STYLE="text-decoration: none"><font color="808080" size="2">Next</font></a></td></tr></table></font></body></html>
