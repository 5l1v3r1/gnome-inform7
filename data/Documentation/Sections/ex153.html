<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>21.13. Writing, reading and appending text to files</title></head>
<STYLE TYPE="text/css">
<!--
.oval, .oval TD
{
background-image:url('../doc_images/ovoid.png');
color:white;
}
.wiarrow, .wiarrow TD
{
background-image:url('../doc_images/wiarrow.png');
color:white;
}
.rbarrow, .rbarrow TD
{
background-image:url('../doc_images/rbarrow.png');
color:white;
}
-->
</STYLE>
<body bgcolor="#ffffff">
<!-- SEARCH TITLE "The Fifth Body" -->
<!-- SEARCH SECTION "Ex 417" -->
<!-- SEARCH SORT "Ex 021-013-417" -->
<font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><table CELLPADDING=0 CELLSPACING=0 width="100%" bgcolor="#000000"><tr><TD width=38px height=26px align="center" valign="center"><a href=doc362.html border=0><img border=0 src=../doc_images/Hookleft.png id="hookleft" style="height: 24px; width: 32px;" border=0></a></td><td halign="left" valign="center" CELLPADDING=0 CELLSPACING=0><a href=../chap21.html STYLE="text-decoration: none"><font color="#FFFFFF" size=2>Chapter 21: Figures, Sounds and Files</font></a></td><TD width=56px height=26px align="right" valign="center"><a href=../index.html border=0><img border=0 src=../doc_images/Hookup.png id="hookup" style="height: 24px; width: 24px;" border=0></a><a href=doc364.html border=0><img border=0 src=../doc_images/Hookright.png id="hookright" style="height: 24px; width: 32px;" border=0></a></td></tr></table><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><TD height=8px halign="center" valign="center"></td></tr></table><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><TD width=38px halign="center" valign="center"></td><td halign="left" valign="center" CELLPADDING=0 CELLSPACING=0><font color="#000000" size="3"><b>21.13. Writing, reading and appending text to files</b></font></td></tr></table>
<p>
<p>Text can also be saved to a file, and again all file-handling is automatic:
<p>
<blockquote><font color="#000080">write &quot;Jackdaws love my big sphinx of quartz.&quot; to the file of Abecedary Wisdom;
<br>append &quot;Jinxed wizards pluck ivy from the big quilt.&quot; to the file of Abecedary Wisdom;
</font></blockquote><p>
<p>
<p>The difference between &quot;write&quot; and &quot;append&quot; here is that &quot;write&quot; makes this text the entire contents of the file, whereas &quot;append&quot; adds it the end (creating the file if it did not previously exist).
<p>
<p>The quoted text can, of course, contain substitutions, so can be long and complex if need be.
<p>
<p>Text from a file is printed back with the text substitution:
<p>
<blockquote><font color="#000080">&quot;[text of the File of Abecedary Wisdom]&quot;
</font></blockquote><p>
<p>
<p>To copy one file to another, for instance,
<p>
<blockquote><font color="#000080">write &quot;[text of the file of Abecedary Wisdom]&quot; to the file of Secondary Wisdom;
</font></blockquote><p>
<p>
<p><hr><p>
<a name="e18"><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><td halign="left" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="oval"><TD width=38px height=30px align="left" valign="center"><a href=ex18.html#e18 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><b>416</b></div></a></TD></TR></TABLE></td><td CELLPADDING=0 CELLSPACING=0 halign="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><a href=ex18.html#e18 STYLE="text-decoration: none"><img border="0" style="height: 15px; width: 13px;" alt="*" src='../doc_images/asterisk.png'><b><font color="#505050">&nbsp;Example&nbsp;</font> <font color="#000000"> The Fourth Body</font></b></a><br>Notebooks in which the player can record assorted notes throughout play.<p></td><td halign="right" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="rbarrow"><TD width=38px height=30px align="left" valign="center"><a  href=Rex18.html#e18 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><i>RB</i></div></a></TD></TR></TABLE></td></tr></table>
<!-- EXAMPLE START -->
<a name="e153"><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><td halign="left" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="oval"><TD width=38px height=30px align="left" valign="center"><a href=doc363.html#e153 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><b>417</b></div></a></TD></TR></TABLE></td><td CELLPADDING=0 CELLSPACING=0 halign="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><a href=doc363.html#e153 STYLE="text-decoration: none"><img border="0" style="height: 15px; width: 13px;" alt="*" src='../doc_images/asterisk.png'><img border="0" style="height: 15px; width: 13px;" alt="*" src='../doc_images/asterisk.png'><b><font color="#505050">&nbsp;<b>Example</b>&nbsp;</font> <font color="#000000"> The Fifth Body</font></b></a><br>An expansion on the notebook, allowing the player somewhat more room in which to type his recorded remark.<p></td><td halign="right" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="rbarrow"><TD width=38px height=30px align="left" valign="center"><a  href=Rex153.html#e153 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><i>RB</i></div></a></TD></TR></TABLE></td></tr></table>
<table border=0 bgcolor="#f0f0f0" width=100%><tr><td><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2>
<p>
<p>The implementation here is much like that of the previous example, except that we allow the player to write his notebook input as a separate command, leading to an exchange such as
<p>
<blockquote><font color="#000080">>write in my notebook
<br>You open your notebook and prepare to write in it.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">>>Am beginning to think that HT and BGG are in this together.
<br>You finish writing and fold your notebook away.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">>read my notebook
<br>You read:
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Wednesday morning
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Am beginning to think that HT and BGG are in this together.
</font></blockquote><p>
<p>
<p>The opening is much as before:
<p>
<blockquote><font color="#000080"><script language="JavaScript">
function pasteCode516(code) {
    var myProject = external.Project;

    myProject.selectView('source');
    myProject.pasteCode('[=0x0022=]The Fifth Body[=0x0022=][=0x000A=][=0x000A=]A jotter is a kind of thing. A jotter has an external-file called the text file. A jotter can be fresh or used. A jotter is usually fresh. A jotter has a text called the heading.[=0x000A=][=0x000A=]The currently erased jotter is an object that varies.[=0x000A=][=0x000A=]To erase (pad - a jotter):[=0x000A=][=0x0009=]now the currently erased jotter is the pad;[=0x000A=][=0x0009=]write [=0x0022=][heading of the currently erased jotter][paragraph break][=0x0022=] to the text file of the pad;[=0x000A=][=0x0009=]now the pad is fresh.[=0x000A=][=0x000A=]To write in (pad - a jotter):[=0x000A=][=0x0009=]append [=0x0022=][the time of day]: [player[=0x0027=]s command][line break][=0x0022=] to the text file of the pad;[=0x000A=][=0x0009=]now the pad is used.[=0x000A=][=0x000A=]To read (pad - a jotter):[=0x000A=][=0x0009=]say [=0x0022=]You read: [paragraph break][text of the text file of the pad][=0x0022=].[=0x000A=][=0x000A=]When play begins:[=0x000A=][=0x0009=]repeat with pad running through jotters:[=0x000A=][=0x0009=][=0x0009=]erase the pad.[=0x000A=][=0x000A=]Instead of examining a used jotter (called the pad):[=0x000A=][=0x0009=]read the pad.[=0x000A=][=0x000A=]Instead of examining a fresh jotter (called the pad):[=0x000A=][=0x0009=]say [=0x0022=]There is nothing of note in [the pad].[=0x0022=][=0x000A=][=0x000A=]Target jotter is an object that varies. The target jotter is usually nothing.[=0x000A=][=0x000A=]Understand [=0x0022=]write in [something preferably held][=0x0022=] as writing in. Writing in is an action applying to one thing.[=0x000A=][=0x000A=]Check writing in:[=0x000A=][=0x0009=]if the noun is not a jotter, say [=0x0022=]It would be better to write in a notebook.[=0x0022=] instead.[=0x000A=][=0x000A=]Carry out writing in:[=0x000A=][=0x0009=]change the command prompt to [=0x0022=][=0x003E=][=0x003E=][=0x0022=];[=0x000A=][=0x0009=]change the target jotter to the noun.[=0x000A=][=0x000A=]Report writing in:[=0x000A=][=0x0009=]say [=0x0022=]You open [the noun] and prepare to write in it.[=0x0022=][=0x000A=][=0x000A=][Now what happens is that the player, having typed WRITE IN NOTEBOOK, will be faced with a [=0x0022=][=0x003E=][=0x003E=][=0x0022=] prompt instead of the usual [=0x0022=][=0x003E=][=0x0022=]: a sign that the input mode has changed.][=0x000A=][=0x000A=][The next code is to react to reading a command. Whatever the player types at the [=0x003E=][=0x003E=] prompt when the target jotter is set will now be recorded in the notebook, though with a character limit of about 60-100 characters depending on how much upper-case and punctuation he uses. (There are ways to lift the character length restriction as well, but they would take us into deeper waters.)][=0x000A=][=0x000A=]After reading a command when target jotter is a jotter:[=0x000A=][=0x0009=]change the command prompt to [=0x0022=][=0x003E=][=0x0022=];[=0x000A=][=0x0009=]write in target jotter;[=0x000A=][=0x0009=]now target jotter is used;[=0x000A=][=0x0009=]say [=0x0022=]You finish writing and fold your notebook away.[=0x0022=];[=0x000A=][=0x0009=]change the target jotter to nothing;[=0x000A=][=0x0009=]reject the player[=0x0027=]s command.[=0x000A=][=0x000A=]Understand [=0x0022=]erase [something preferably held][=0x0022=] as erasing. Erasing is an action applying to one carried thing.[=0x000A=][=0x000A=]Check erasing:[=0x000A=][=0x0009=]if the noun is not a jotter, say [=0x0022=]It[=0x0027=]s hard to see how.[=0x0022=] instead.[=0x000A=][=0x000A=]Carry out erasing:[=0x000A=][=0x0009=]erase the noun.[=0x000A=][=0x000A=]Report erasing:[=0x000A=][=0x0009=]say [=0x0022=]You scrub out all the entries in [the noun].[=0x0022=][=0x000A=][=0x000A=]The player carries a jotter called your notebook. The file of Player[=0x0027=]s Observations is called [=0x0022=]notebook[=0x0022=]. The text file of your notebook is the file of Player[=0x0027=]s Observations. The heading of your notebook is [=0x0022=]Sunday Morning[=0x0022=].[=0x000A=][=0x000A=]The Vestry is a room. [=0x0022=][Havers] hangs back by the door: the forensics expert is not finished with a preliminary examination of the body. From here you can[=0x0027=]t see much, except that the expert has peeled back and laid to one side a liturgical vestment that someone at the church used to cover the corpse until the police came. What was once a cream silk with festive Easter embroidery is now stained with blood-colored handprints.[=0x0022=][=0x000A=][=0x000A=]Detective Havers is a woman in the Vestry. The description is [=0x0022=]She looks glumly back. There[=0x0027=]s still a purple-ish bruise on her cheekbone from the disaster Thursday afternoon.[=0x0022=] Havers is scenery.[=0x000A=][=0x000A=]Havers is carrying a jotter called Barbara[=0x0027=]s notebook. The file of Barbara[=0x0027=]s Observations is called [=0x0022=]barbara[=0x0022=]. The text file of Barbara[=0x0027=]s notebook is the file of Barbara[=0x0027=]s Observations. The heading of Barbara[=0x0027=]s notebook is [=0x0022=]Sun. AM[=0x0022=].[=0x000A=][=0x000A=]The time of day is 9:11 AM.[=0x000A=][=0x000A=]');
}
</script>
<a href="javascript:pasteCode516()"><img border=0 src=../doc_images/paste.png></a> &quot;The Fifth Body&quot;
</font></blockquote><p>
<p>
<blockquote><font color="#000080">A jotter is a kind of thing. A jotter has an external-file called the text file. A jotter can be fresh or used. A jotter is usually fresh. A jotter has a text called the heading.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">The currently erased jotter is an object that varies.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">To erase (pad - a jotter):
<br>&nbsp;&nbsp;&nbsp;&nbsp;now the currently erased jotter is the pad;
<br>&nbsp;&nbsp;&nbsp;&nbsp;write &quot;[heading of the currently erased jotter][paragraph break]&quot; to the text file of the pad;
<br>&nbsp;&nbsp;&nbsp;&nbsp;now the pad is fresh.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">To write in (pad - a jotter):
<br>&nbsp;&nbsp;&nbsp;&nbsp;append &quot;[the time of day]: [player's command][line break]&quot; to the text file of the pad;
<br>&nbsp;&nbsp;&nbsp;&nbsp;now the pad is used.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">To read (pad - a jotter):
<br>&nbsp;&nbsp;&nbsp;&nbsp;say &quot;You read: [paragraph break][text of the text file of the pad]&quot;.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">When play begins:
<br>&nbsp;&nbsp;&nbsp;&nbsp;repeat with pad running through jotters:
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;erase the pad.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Instead of examining a used jotter (called the pad):
<br>&nbsp;&nbsp;&nbsp;&nbsp;read the pad.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Instead of examining a fresh jotter (called the pad):
<br>&nbsp;&nbsp;&nbsp;&nbsp;say &quot;There is nothing of note in [the pad].&quot;
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Target jotter is an object that varies. The target jotter is usually nothing.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Understand &quot;write in [something preferably held]&quot; as writing in. Writing in is an action applying to one thing.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Check writing in:
<br>&nbsp;&nbsp;&nbsp;&nbsp;if the noun is not a jotter, say &quot;It would be better to write in a notebook.&quot; instead.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Carry out writing in:
<br>&nbsp;&nbsp;&nbsp;&nbsp;change the command prompt to &quot;>>&quot;;
<br>&nbsp;&nbsp;&nbsp;&nbsp;change the target jotter to the noun.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Report writing in:
<br>&nbsp;&nbsp;&nbsp;&nbsp;say &quot;You open [the noun] and prepare to write in it.&quot;
</font></blockquote><p>
<p>
<p>Now what happens is that the player, having typed WRITE IN NOTEBOOK, will be faced with a &quot;>>&quot; prompt instead of the usual &quot;>&quot;: a sign that the input mode has changed.
<p>
<p>The next code is to react to reading a command. Whatever the player types at the >> prompt when the target jotter is set will now be recorded in the notebook, though with a character limit of about 60-100 characters depending on how much upper-case and punctuation he uses. (There are ways to lift the character length restriction as well, but they would take us into deeper waters.)
<p>
<blockquote><font color="#000080">After reading a command when target jotter is a jotter:
<br>&nbsp;&nbsp;&nbsp;&nbsp;change the command prompt to &quot;>&quot;;
<br>&nbsp;&nbsp;&nbsp;&nbsp;write in target jotter;
<br>&nbsp;&nbsp;&nbsp;&nbsp;now target jotter is used;
<br>&nbsp;&nbsp;&nbsp;&nbsp;say &quot;You finish writing and fold your notebook away.&quot;;
<br>&nbsp;&nbsp;&nbsp;&nbsp;change the target jotter to nothing;
<br>&nbsp;&nbsp;&nbsp;&nbsp;reject the player's command.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Understand &quot;erase [something preferably held]&quot; as erasing. Erasing is an action applying to one carried thing.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Check erasing:
<br>&nbsp;&nbsp;&nbsp;&nbsp;if the noun is not a jotter, say &quot;It's hard to see how.&quot; instead.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Carry out erasing:
<br>&nbsp;&nbsp;&nbsp;&nbsp;erase the noun.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Report erasing:
<br>&nbsp;&nbsp;&nbsp;&nbsp;say &quot;You scrub out all the entries in [the noun].&quot;
</font></blockquote><p>
<p>
<blockquote><font color="#000080">The player carries a jotter called your notebook. The file of Player's Observations is called &quot;notebook&quot;. The text file of your notebook is the file of Player's Observations. The heading of your notebook is &quot;Sunday Morning&quot;.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">The Vestry is a room. &quot;[Havers] hangs back by the door: the forensics expert is not finished with a preliminary examination of the body. From here you can't see much, except that the expert has peeled back and laid to one side a liturgical vestment that someone at the church used to cover the corpse until the police came. What was once a cream silk with festive Easter embroidery is now stained with blood-colored handprints.&quot;
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Detective Havers is a woman in the Vestry. The description is &quot;She looks glumly back. There's still a purple-ish bruise on her cheekbone from the disaster Thursday afternoon.&quot; Havers is scenery.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Havers is carrying a jotter called Barbara's notebook. The file of Barbara's Observations is called &quot;barbara&quot;. The text file of Barbara's notebook is the file of Barbara's Observations. The heading of Barbara's notebook is &quot;Sun. AM&quot;.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">The time of day is 9:11 AM.
</font></blockquote><p>
<p>
<table CELLPADDING=0 CELLSPACING=0 width="100%" height=18><tr><td width="100%"> </td><td width=18 align="left" bgcolor="#000000"><a href=doc363.html><img src=../doc_images/Hookclose.png id="hookclose" style="height: 17px; width: 17px;" border="0"></a></td><td width=4></td></tr></table></td></tr></table><p>
<!-- EXAMPLE END -->
<p><hr><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><td width="33%" align="left"><a href=doc362.html border=0 STYLE="text-decoration: none"><font color="808080" size="2">Previous</font></a></td><td width="33%" align="center"><a href=../index.html border=0 STYLE="text-decoration: none"><font color="808080" size="2">Contents</font></a></td><td width="33%" align="right"><a href=doc364.html border=0 STYLE="text-decoration: none"><font color="808080" size="2">Next</font></a></td></tr></table></font></body></html>
