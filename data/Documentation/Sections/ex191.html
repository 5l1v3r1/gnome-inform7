<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>12.20. Stored actions</title></head>
<STYLE TYPE="text/css">
<!--
.oval, .oval TD
{
background-image:url('../doc_images/ovoid.png');
color:white;
}
.wiarrow, .wiarrow TD
{
background-image:url('../doc_images/wiarrow.png');
color:white;
}
.rbarrow, .rbarrow TD
{
background-image:url('../doc_images/rbarrow.png');
color:white;
}
-->
</STYLE>
<body bgcolor="#ffffff">
<!-- SEARCH TITLE "Bosch" -->
<!-- SEARCH SECTION "Ex 209" -->
<!-- SEARCH SORT "Ex 012-020-209" -->
<font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><table CELLPADDING=0 CELLSPACING=0 width="100%" bgcolor="#000000"><tr><TD width=38px height=26px align="center" valign="center"><a href=doc196.html border=0><img border=0 src=../doc_images/Hookleft.png id="hookleft" style="height: 24px; width: 32px;" border=0></a></td><td halign="left" valign="center" CELLPADDING=0 CELLSPACING=0><a href=../chap12.html STYLE="text-decoration: none"><font color="#FFFFFF" size=2>Chapter 12: Advanced Actions</font></a></td><TD width=56px height=26px align="right" valign="center"><a href=../index.html border=0><img border=0 src=../doc_images/Hookup.png id="hookup" style="height: 24px; width: 24px;" border=0></a><a href=doc198.html border=0><img border=0 src=../doc_images/Hookright.png id="hookright" style="height: 24px; width: 32px;" border=0></a></td></tr></table><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><TD height=8px halign="center" valign="center"></td></tr></table><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><TD width=38px halign="center" valign="center"></td><td halign="left" valign="center" CELLPADDING=0 CELLSPACING=0><font color="#000000" size="3"><b>12.20. Stored actions</b></font></td></tr></table>
<p>
<p>As we have seen, to describe an action fully takes a complicated little bundle of information - we need to know what is to be done, who will do it, and what it will be done to. There are times when we would like to remember an action and look back on it later (perhaps many turns later, after many other actions have taken effect) - but this is not easy to do with only the techniques we have seen so far. There are quite a few cases to get right, and it would be easy to not store quite enough of the details.
<p>
<p>Fortunately, Inform provides a kind of value called &quot;stored action&quot; which can do all of this automatically. As with most other kinds of value, stored actions can be held in variables, &quot;let&quot; values, properties or table columns. For example:
<p>
<blockquote><font color="#000080">The best idea yet is a stored action that varies.
</font></blockquote><p>
<p>
<p>creates a variable called &quot;the best idea yet&quot; which holds a stored action. This will normally be created holding the default value - the player waiting - but can instead be set explicitly:
<p>
<blockquote><font color="#000080">The best idea yet is the action of pushing the button.
</font></blockquote><p>
<p>
<p>Note the words &quot;action of...&quot;, which convert any sufficiently exact description of an action into its stored action form.
<p>
<p>In rules and phrases, we can always obtain the action currently going on (if there is one) with the value &quot;current action&quot;:
<p>
<blockquote><font color="#000080">let the present whim be the current action;
</font></blockquote><p>
<p>
<p>Moreover, just as we can &quot;try&quot; any action, so we can also try a stored one:
<p>
<blockquote><font color="#000080">try the present whim;
<br>silently try the present whim;
</font></blockquote><p>
<p>
<p>would each work in the natural way. A stored action can do anything that actions can do: in particular, they remember, if necessary, the exact wording of the player's command at the time they were stored - so that even actions like &quot;looking up 'x100' in the code book&quot; will work if stored and tried on some future turn.
<p>
<p>As with any other kind of value, we can also say a stored action, and this produces a fairly natural description of what the action is:
<p>
<blockquote><font color="#000080">Before doing something in the presence of the bearded psychiatrist: say &quot;'Zo, the subject wishes to engage in [the current action]. Zis is very interesting.'&quot;
</font></blockquote><p>
<p>
<p>will produce text such as:
<p>
<blockquote><font color="#000080">&quot;So, the subject vishes to engage in rubbing the fireman's pole. Zis is very interesting.&quot;
</font></blockquote><p>
<p>
<p>One of Inform's most convenient features is its ability to test if the action being processed matches vague or complicated descriptions of whole classes of actions. Now, it would not make sense to write
<p>
<blockquote><font color="#000080">if the best idea yet is the action of taking something, ...
</font></blockquote><p>
<p>
<p>because &quot;action of ...&quot; has to make an exact action, which clearly this is not: so Inform will produce a problem message if we try. But we do not need to, because Inform also allows us to compare a stored action against any description of an action, however vague:
<p>
<blockquote><font color="#000080">if the best idea yet is taking something, ...
<br>if the best idea yet is doing something to the lever, ...
</font></blockquote><p>
<p>
<p>When dealing with stored actions, we sometimes want to know what they are dealing with. We can extract this information using the following phrases:
<p>
<blockquote><font color="#000080">action-name part of S
<br>noun part of S
<br>second noun part of S
<br>actor part of S
</font></blockquote><p>
<p>
<p>For example, if S is &quot;Algy trying throwing the brick at Biggles&quot; then saying these four values will produce
<p>
<blockquote><font color="#000080">throwing it at
<br>brick
<br>Biggles
<br>Algy
</font></blockquote><p>
<p>
<p>Should the action be one which does not involve objects, the noun and second noun may be &quot;nothing&quot;: for instance if S is &quot;setting the dial to 3417&quot; then the noun part of S is the dial but the second noun part is nothing. (This has to be true, as otherwise Inform could never know what kind of value &quot;the noun part of S&quot; would have.)
<p>
<p>As a convenience, the condition
<p>
<blockquote><font color="#000080">if S involves X, ...
</font></blockquote><p>
<p>
<p>is true if the object X appears as any of the actor, the noun or the second noun: for instance,
<p>
<blockquote><font color="#000080">if the current action involves Algy
</font></blockquote><p>
<p>
<p>would be true for &quot;give revolver to Algy&quot;, &quot;Algy trying flying the Sopwith Camel&quot;, &quot;examine Algy&quot; and so on, but false for &quot;ask Raymond about secret airfield&quot;.
<p>
<p><hr><p>
<a name="e186"><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><td halign="left" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="oval"><TD width=38px height=30px align="left" valign="center"><a href=ex186.html#e186 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><b>208</b></div></a></TD></TR></TABLE></td><td CELLPADDING=0 CELLSPACING=0 halign="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><a href=ex186.html#e186 STYLE="text-decoration: none"><img border="0" style="height: 15px; width: 13px;" alt="*" src='../doc_images/asterisk.png'><b><font color="#505050">&nbsp;Example&nbsp;</font> <font color="#000000"> Cactus Will Outlive Us All</font></b></a><br>For every character besides the player, there is an action that will cause that character to wither right up and die.<p></td><td halign="right" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="rbarrow"><TD width=38px height=30px align="left" valign="center"><a  href=Rex186.html#e186 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><i>RB</i></div></a></TD></TR></TABLE></td></tr></table>
<!-- EXAMPLE START -->
<a name="e191"><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><td halign="left" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="oval"><TD width=38px height=30px align="left" valign="center"><a href=doc197.html#e191 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><b>209</b></div></a></TD></TR></TABLE></td><td CELLPADDING=0 CELLSPACING=0 halign="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><a href=doc197.html#e191 STYLE="text-decoration: none"><img border="0" style="height: 15px; width: 13px;" alt="*" src='../doc_images/asterisk.png'><b><font color="#505050">&nbsp;<b>Example</b>&nbsp;</font> <font color="#000000"> Bosch</font></b></a><br>Creating a list of actions that will earn the player points, and using this both to change the score and to give FULL SCORE reports.<p></td><td halign="right" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="rbarrow"><TD width=38px height=30px align="left" valign="center"><a  href=Rex191.html#e191 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><i>RB</i></div></a></TD></TR></TABLE></td></tr></table>
<table border=0 bgcolor="#f0f0f0" width=100%><tr><td><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2>
<p>
<p>We could, if we wanted, make a table of stored actions all of which represent things that will earn points for the player. For instance:
<p>
<blockquote><font color="#000080"><script language="JavaScript">
function pasteCode306(code) {
    var myProject = external.Project;

    myProject.selectView('source');
    myProject.pasteCode('[=0x0022=]Bosch[=0x0022=][=0x000A=][=0x000A=]The Garden of Excess is a room. The gilded lily is an edible thing in the Garden of Excess.[=0x000A=][=0x000A=]The Pathway to Desire is west of the Garden of Excess. The emerald leaf is in the Pathway.[=0x000A=][=0x000A=]Table of Valuable Actions[=0x000A=]relevant action[=0x0009=]point value[=0x0009=]turn stamp[=0x000A=]taking the emerald leaf[=0x0009=]15[=0x0009=]-1[=0x000A=]eating the gilded lily[=0x0009=]5[=0x0009=]-1[=0x000A=][=0x000A=][(And our list would presumably continue from there, in the full game.)][=0x000A=][=0x000A=]The maximum score is 25.[=0x000A=][=0x000A=]After doing something:[=0x000A=][=0x0009=]repeat through Table of Valuable Actions:[=0x000A=][=0x0009=][=0x0009=]if the current action is the relevant action entry and turn stamp entry is less than 0:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]change the turn stamp entry to the turn count;[=0x000A=][=0x0009=][=0x0009=][=0x0009=]award point value entry points;[=0x000A=][=0x0009=]continue the action.[=0x000A=][=0x000A=]Understand [=0x0022=]full score[=0x0022=] or [=0x0022=]full[=0x0022=] as requesting the complete score. Requesting the complete score is an action out of world.[=0x000A=][=0x000A=]Check requesting the complete score:[=0x000A=][=0x0009=]if the score is 0, say [=0x0022=]You have not yet achieved anything of note.[=0x0022=] instead.[=0x000A=][=0x000A=]Carry out requesting the complete score:[=0x000A=][=0x0009=]say [=0x0022=]So far you have received points for the following: [line break][=0x0022=];[=0x000A=][=0x0009=]sort the Table of Valuable Actions in turn stamp order;[=0x000A=][=0x0009=]repeat through the Table of Valuable Actions:[=0x000A=][=0x0009=][=0x0009=]if the turn stamp entry is greater than 0:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]say [=0x0022=][line break]  [relevant action entry]: [point value entry] points[=0x0022=];[=0x000A=][=0x0009=]say line break.[=0x000A=][=0x000A=]Test me with [=0x0022=]eat lily / w / full score / get leaf / full[=0x0022=].[=0x000A=][=0x000A=]');
}
</script>
<a href="javascript:pasteCode306()"><img border=0 src=../doc_images/paste.png></a> &quot;Bosch&quot;
</font></blockquote><p>
<p>
<blockquote><font color="#000080">The Garden of Excess is a room. The gilded lily is an edible thing in the Garden of Excess.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">The Pathway to Desire is west of the Garden of Excess. The emerald leaf is in the Pathway.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Table of Valuable Actions
<br><table border="0" valign="top" cellpadding="0" cellspacing="0"><tr><td valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2 color="#000080">relevant action</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2 color="#000080">point value</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2 color="#000080">turn stamp</font>&nbsp;&nbsp;&nbsp;</td>
</tr><tr><td valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2 color="#000080">taking the emerald leaf</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2 color="#000080">15</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2 color="#000080">-1</font>&nbsp;&nbsp;&nbsp;</td>
</tr><tr><td valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2 color="#000080">eating the gilded lily</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2 color="#000080">5</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2 color="#000080">-1</font>&nbsp;&nbsp;&nbsp;</td>
</tr></table>
</font></blockquote><p>
<p>
<p>(And our list would presumably continue from there, in the full game.)
<p>
<blockquote><font color="#000080">The maximum score is 25.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">After doing something:
<br>&nbsp;&nbsp;&nbsp;&nbsp;repeat through Table of Valuable Actions:
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if the current action is the relevant action entry and turn stamp entry is less than 0:
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;change the turn stamp entry to the turn count;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;award point value entry points;
<br>&nbsp;&nbsp;&nbsp;&nbsp;continue the action.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Understand &quot;full score&quot; or &quot;full&quot; as requesting the complete score. Requesting the complete score is an action out of world.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Check requesting the complete score:
<br>&nbsp;&nbsp;&nbsp;&nbsp;if the score is 0, say &quot;You have not yet achieved anything of note.&quot; instead.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Carry out requesting the complete score:
<br>&nbsp;&nbsp;&nbsp;&nbsp;say &quot;So far you have received points for the following: [line break]&quot;;
<br>&nbsp;&nbsp;&nbsp;&nbsp;sort the Table of Valuable Actions in turn stamp order;
<br>&nbsp;&nbsp;&nbsp;&nbsp;repeat through the Table of Valuable Actions:
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if the turn stamp entry is greater than 0:
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;say &quot;[line break]  [relevant action entry]: [point value entry] points&quot;;
<br>&nbsp;&nbsp;&nbsp;&nbsp;say line break.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Test me with &quot;eat lily / w / full score / get leaf / full&quot;.
</font></blockquote><p>
<p>
<p>This system is tidy, but limited: we cannot give actions interesting names in the score list, like &quot;seducing the pirate's daughter&quot; or &quot;collecting a valuable artifact&quot;. So it will not be ideal in all situations, but it has the virtue of being easy to extend, and of listing all of the player's successes in the order in which they occurred in his play-through.
<table CELLPADDING=0 CELLSPACING=0 width="100%" height=18><tr><td width="100%"> </td><td width=18 align="left" bgcolor="#000000"><a href=doc197.html><img src=../doc_images/Hookclose.png id="hookclose" style="height: 17px; width: 17px;" border="0"></a></td><td width=4></td></tr></table></td></tr></table><p>
<!-- EXAMPLE END -->
<a name="e101"><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><td halign="left" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="oval"><TD width=38px height=30px align="left" valign="center"><a href=ex101.html#e101 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><b>210</b></div></a></TD></TR></TABLE></td><td CELLPADDING=0 CELLSPACING=0 halign="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><a href=ex101.html#e101 STYLE="text-decoration: none"><img border="0" style="height: 15px; width: 13px;" alt="*" src='../doc_images/asterisk.png'><img border="0" style="height: 15px; width: 13px;" alt="*" src='../doc_images/asterisk.png'><b><font color="#505050">&nbsp;Example&nbsp;</font> <font color="#000000"> Actor's Studio</font></b></a><br>A video camera that records actions performed in its presence, and plays them back with time-stamps.<p></td><td halign="right" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="rbarrow"><TD width=38px height=30px align="left" valign="center"><a  href=Rex101.html#e101 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><i>RB</i></div></a></TD></TR></TABLE></td></tr></table>
<a name="e83"><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><td halign="left" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="oval"><TD width=38px height=30px align="left" valign="center"><a href=ex83.html#e83 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><b>211</b></div></a></TD></TR></TABLE></td><td CELLPADDING=0 CELLSPACING=0 halign="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><a href=ex83.html#e83 STYLE="text-decoration: none"><img border="0" style="height: 15px; width: 13px;" alt="*" src='../doc_images/asterisk.png'><img border="0" style="height: 15px; width: 13px;" alt="*" src='../doc_images/asterisk.png'><b><font color="#505050">&nbsp;Example&nbsp;</font> <font color="#000000"> Anteaters</font></b></a><br>The player carries a gizmo that is able to record actions performed by the player, then force him to repeat them when the gizmo is dropped. This includes storing actions that apply to topics, as in "look up anteater colonies in the guide".<p></td><td halign="right" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="rbarrow"><TD width=38px height=30px align="left" valign="center"><a  href=Rex83.html#e83 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><i>RB</i></div></a></TD></TR></TABLE></td></tr></table>
<p><hr><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><td width="33%" align="left"><a href=doc196.html border=0 STYLE="text-decoration: none"><font color="808080" size="2">Previous</font></a></td><td width="33%" align="center"><a href=../index.html border=0 STYLE="text-decoration: none"><font color="808080" size="2">Contents</font></a></td><td width="33%" align="right"><a href=doc198.html border=0 STYLE="text-decoration: none"><font color="808080" size="2">Next</font></a></td></tr></table></font></body></html>
