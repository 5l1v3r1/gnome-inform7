<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>7.5. Combat and Death</title></head>
<STYLE TYPE="text/css">
<!--
.oval, .oval TD
{
background-image:url('../doc_images/ovoid.png');
color:white;
}
.wiarrow, .wiarrow TD
{
background-image:url('../doc_images/wiarrow.png');
color:white;
}
.rbarrow, .rbarrow TD
{
background-image:url('../doc_images/rbarrow.png');
color:white;
}
-->
</STYLE>
<body bgcolor="#FFFFE0">
<!-- SEARCH TITLE "Lanista 2" -->
<!-- SEARCH SECTION "Ex 267" -->
<!-- SEARCH SORT "Ex 007-005-267" -->
<font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><table CELLPADDING=0 CELLSPACING=0 width="100%" bgcolor="#000000"><tr><TD width=38px height=26px align="center" valign="center"><a href=Rdoc47.html border=0><img border=0 src=../doc_images/Hookleft.png id="hookleft" style="height: 24px; width: 32px;" border=0></a></td><td halign="left" valign="center" CELLPADDING=0 CELLSPACING=0><a href=../Rchap7.html STYLE="text-decoration: none"><font color="#FFFFE0" size=2>Chapter 7: Other Characters</font></a></td><TD width=56px height=26px align="right" valign="center"><a href=../Rindex.html border=0><img border=0 src=../doc_images/Hookup.png id="hookup" style="height: 24px; width: 24px;" border=0></a><a href=Rdoc49.html border=0><img border=0 src=../doc_images/Hookright.png id="hookright" style="height: 24px; width: 32px;" border=0></a></td></tr></table><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><TD height=8px halign="center" valign="center"></td></tr></table><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><TD width=38px halign="center" valign="center"></td><td halign="left" valign="center" CELLPADDING=0 CELLSPACING=0><font color="#000000" size="3"><b>7.5. Combat and Death</b></font></td></tr></table>
<p>
<p>Not all characters are friendly, and there are times when we may want to include a fight sequence. There are a number of ways to approach this, depending on whether we want to offer the player a random outcome, a predetermined one, or a combat sequence that depends partly on strategy or on having the proper equipment.
<p>
<p><b>Lanista 1</b> demonstrates randomized combat in the style of a role-playing game. The player has a partially random chance of doing any given amount of damage; both the player and his opponent have hit points, and whichever one runs out first dies. <b>Lanista 2</b> continues this idea, but includes weapons that affect the amount of of damage done. <b>Diagnose command</b> by itself implements a command that we might use with a combat system to find out how strong characters are at the moment.
<p>
<p>A word of warning about designing such sequences: a player who gets a roll he doesn't like always has the option of UNDOing a turn and re-rolling. This means that he can always win a random battle sooner or later; bad luck only means that it takes him longer (so he gets more bored and irritated as he plays through). It is possible to turn off UNDO implementation with
<p>
<blockquote><font color="#000080">Use UNDO prevention.
</font></blockquote><p>
<p>
<p>...but there is a good chance that this will irritate players in itself. Role-playing-style combat scenarios need careful design, lest they actively make a game less fun.
<p>
<p>In a slightly more realistic setting, combat leaves physical remains behind, unless we're wielding some kind of futuristic weapon that evaporates our opponents entirely: <b>Puff of Orange Smoke</b> demonstrates characters who leave corpses behind when they die, while <b>Technological Terror</b> more tamely explodes robots into numerous component parts.
<p>
<p>Finally, we can imagine some scenarios in which, instead of allowing characters to strike at each other for random damage, we want to introduce an element of strategy. <b>Don Pedro's Revenge</b> shows the rudiments of a system in which the characters can make different kinds of attack depending on where they are in a room filled with perches, barrels, and other swashbuckler props.
<p>
<p><hr><p>
<a name="e132"><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><td halign="left" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="oval"><TD width=38px height=30px align="left" valign="center"><a href=Rex132.html#e132 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><b>181</b></div></a></TD></TR></TABLE></td><td CELLPADDING=0 CELLSPACING=0 halign="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><a href=Rex132.html#e132 STYLE="text-decoration: none"><img border="0" style="height: 15px; width: 13px;" alt="*" src='../doc_images/asterisk.png'><b><font color="#505050">&nbsp;Example&nbsp;</font> <font color="#000000"> Red Cross</font></b></a><br>A DIAGNOSE command which allows the player to check on the health of someone.<p></td><td halign="right" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="wiarrow"><TD width=38px height=30px align="left" valign="center"><a  href=ex132.html#e132 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><i>WI</i></div></a></TD></TR></TABLE></td></tr></table>
<a name="e266"><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><td halign="left" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="oval"><TD width=38px height=30px align="left" valign="center"><a href=Rex266.html#e266 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><b>124</b></div></a></TD></TR></TABLE></td><td CELLPADDING=0 CELLSPACING=0 halign="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><a href=Rex266.html#e266 STYLE="text-decoration: none"><img border="0" style="height: 15px; width: 13px;" alt="*" src='../doc_images/asterisk.png'><b><font color="#505050">&nbsp;Example&nbsp;</font> <font color="#000000">Lanista 1</font></b></a><br>Very simple randomized combat in which characters hit one another for a randomized amount of damage.<p></td><td halign="right" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="wiarrow"><TD width=38px height=30px align="left" valign="center"><a  href=ex266.html#e266 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><i>WI</i></div></a></TD></TR></TABLE></td></tr></table>
<!-- EXAMPLE START -->
<a name="e158"><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><td halign="left" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="oval"><TD width=38px height=30px align="left" valign="center"><a href=Rdoc48.html#e158 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><b>267</b></div></a></TD></TR></TABLE></td><td CELLPADDING=0 CELLSPACING=0 halign="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><a href=Rdoc48.html#e158 STYLE="text-decoration: none"><img border="0" style="height: 15px; width: 13px;" alt="*" src='../doc_images/asterisk.png'><img border="0" style="height: 15px; width: 13px;" alt="*" src='../doc_images/asterisk.png'><b><font color="#505050">&nbsp;<b>Example</b>&nbsp;</font> <font color="#000000">Lanista 2</font></b></a><br>Randomized combat in which the damage done depends on what weapons the characters are wielding, and in which an ATTACK IT WITH action is created to replace regular attacking. Also folds a new DIAGNOSE command into the system.<p></td><td halign="right" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="wiarrow"><TD width=38px height=30px align="left" valign="center"><a  href=ex158.html#e158 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><i>WI</i></div></a></TD></TR></TABLE></td></tr></table>
<table border=0 bgcolor="#ffffc0" width=100%><tr><td><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2>
<p>
<p>Back in the chapter on randomization, we explored a way to create a randomized combat system. That system didn't allow for multiple weapons, though. Here we explore how to create an ATTACK IT WITH action that will let the player choose between weapons with different maximum powers.
<p>
<p>We're also going to rewrite that original &quot;instead of attacking:&quot; rule into an attacking it with action that can be performed equally by the player or by any of the player's enemies.
<p>
<blockquote><font color="#000080"><script language="JavaScript">
function pasteCode794(code) {
    var myProject = external.Project;

    myProject.selectView('source');
    myProject.pasteCode('[=0x0022=]Lanista, Part Two[=0x0022=][=0x000A=][=0x000A=]The Arena is a room. [=0x0022=]Sand, blood, iron. These festivals are normally held on hot days, but the sun has gone behind a cloud and fat drops of rain now and then spatter the arena floor.[=0x0022=] The gladiator is a man in the Arena. [=0x0022=]A bare-chested Scythian gladiator faces you, wielding [a list of weapons carried by the gladiator].[=0x0022=][=0x000A=][=0x000A=]Section 1 - Hit Points[=0x000A=][=0x000A=]A person has a number called maximum hit points. A person has a number called current hit points.[=0x000A=][=0x000A=]The maximum hit points of the player is 35. The maximum hit points of the gladiator is 25.[=0x000A=][=0x000A=][In our simpler version of this example we set the current hit points by hand, but in a game with many characters this would get dull and repetitive, so here we[=0x0027=]ll use a [=0x0022=]when play begins[=0x0022=] to set all current hit point values automatically to maximum:][=0x000A=][=0x000A=]When play begins:[=0x000A=][=0x0009=]repeat with victim running through people:[=0x000A=][=0x0009=][=0x0009=]now the current hit points of the victim is the maximum hit points of the victim.[=0x000A=][=0x000A=]Definition: a person is dead if his current hit points are less than 0.[=0x000A=][=0x000A=]Section 2 - Diagnosis[=0x000A=][=0x000A=]Diagnosing is an action applying to one visible thing. Understand [=0x0022=]diagnose [something][=0x0022=] as diagnosing.[=0x000A=][=0x000A=]Check diagnosing:[=0x000A=][=0x0009=]if the noun is not a person, say [=0x0022=]Only people can have diagnoses.[=0x0022=] instead.[=0x000A=][=0x000A=]Carry out diagnosing:[=0x000A=][=0x0009=]say [=0x0022=][if the noun is the player]You have[otherwise][The noun] has[end if] [current hit points of the noun] out of a possible [maximum hit points of the noun] hit points remaining.[=0x0022=][=0x000A=][=0x000A=]Section 3 - Weapons[=0x000A=][=0x000A=]A weapon is a kind of thing. A weapon has a number called the maximum damage. The maximum damage of a weapon is usually 4.[=0x000A=][=0x000A=]The gladiator carries a weapon called a trident. The maximum damage of the trident is 5. The gladiator carries a weapon called a net. The maximum damage of the net is 1.[=0x000A=][=0x000A=]The player carries a weapon called a mace. The maximum damage of the mace is 3.[=0x000A=][=0x000A=]Section 4 - Attacking it with[=0x000A=][=0x000A=][In our new system, we want to specify what is being used for an attack. This means that we need to create a new [=0x0022=]attacking it with[=0x0022=] action, and also that we should disable the existing [=0x0022=]attacking...[=0x0022=] command.][=0x000A=][=0x000A=][Here[=0x0027=]s why: If we leave the default attack command in place, Inform will continue to accept commands like [=0x003E=]ATTACK GLADIATOR, but reply foolishly with the default [=0x0022=]Violence is not the answer...[=0x0022=] response.][=0x000A=][=0x000A=][A somewhat better approach would be to change the reply of [=0x003E=]ATTACK GLADIATOR to say something like [=0x0022=]You must specify a weapon to attack with.[=0x0022=] But this is still less than ideal, because it means that the player has to then rewrite his entire command. If, on the other hand, we take out [=0x0022=]ATTACK GLADIATOR[=0x0022=] entirely, the game will always prompt [=0x0022=]What do you want to attack the gladiator with?[=0x0022=] -- which teaches the player the correct command structure for this particular game, and avoids pretending to understand any command that is not meaningful within this game.][=0x000A=][=0x000A=][This is a little bit of work because ATTACK has a lot of synonyms in the default library, but if we look through the actions index we can find them all:][=0x000A=][=0x000A=]Understand the commands [=0x0022=]attack[=0x0022=] and [=0x0022=]punch[=0x0022=] and [=0x0022=]destroy[=0x0022=] and [=0x0022=]kill[=0x0022=] and [=0x0022=]murder[=0x0022=] and [=0x0022=]hit[=0x0022=] and [=0x0022=]thump[=0x0022=] and [=0x0022=]break[=0x0022=] and [=0x0022=]smash[=0x0022=] and [=0x0022=]torture[=0x0022=] and [=0x0022=]wreck[=0x0022=] as something new.[=0x000A=][=0x000A=][Now we make our new command:][=0x000A=][=0x000A=]Attacking it with is an action applying to one visible thing and one carried thing. Understand [=0x0022=]attack [someone] with [something preferably held][=0x0022=] as attacking it with.[=0x000A=][=0x000A=][Note that we[=0x0027=]ve specified [=0x0022=]one carried thing[=0x0022=], because we want the player to pick up a weapon to use if necessary. And now we assign all the old attack vocabulary to apply to the new command:][=0x000A=][=0x000A=]Understand the commands [=0x0022=]punch[=0x0022=] and [=0x0022=]destroy[=0x0022=] and [=0x0022=]kill[=0x0022=] and [=0x0022=]murder[=0x0022=] and [=0x0022=]hit[=0x0022=] and [=0x0022=]thump[=0x0022=] and [=0x0022=]break[=0x0022=] and [=0x0022=]smash[=0x0022=] and [=0x0022=]torture[=0x0022=] and [=0x0022=]wreck[=0x0022=] as [=0x0022=]attack[=0x0022=].[=0x000A=][=0x000A=][This may seem counter-intuitive, but order of source code matters here: we first get rid of the old, default vocabulary, then define our new action, then make the vocabulary apply to that new action. Inform will now understand [=0x003E=]HIT GLADIATOR WITH TRIDENT, [=0x003E=]BREAK GLADIATOR WITH TRIDENT, and so on.][=0x000A=][=0x000A=][Our new action is also a perfect place to use an action variable: we[=0x0027=]re going to need to choose an amount of damage done and refer to that several times in our action rules. So let[=0x0027=]s set that up first:][=0x000A=][=0x000A=]The attacking it with action has a number called the damage inflicted.[=0x000A=][=0x000A=]Setting action variables for attacking something with something:[=0x000A=][=0x0009=]if the second noun is a weapon:[=0x000A=][=0x0009=][=0x0009=]let the maximum attack be the maximum damage of the second noun;[=0x000A=][=0x0009=][=0x0009=]change the damage inflicted to a random number between 1 and the maximum attack.[=0x000A=][=0x000A=]Check an actor attacking something with something (this is the can[=0x0027=]t attack with something that isn[=0x0027=]t a weapon rule):[=0x000A=][=0x0009=]if the second noun is not a weapon:[=0x000A=][=0x0009=][=0x0009=]if the actor is the player, say [=0x0022=][The second noun] does not qualify as a weapon.[=0x0022=];[=0x000A=][=0x0009=][=0x0009=]stop the action.[=0x000A=][=0x000A=]Check an actor attacking something with something (this is the can[=0x0027=]t attack a non-person rule):[=0x000A=][=0x0009=]if the noun is not a person:[=0x000A=][=0x0009=][=0x0009=]if the actor is the player, say [=0x0022=][The noun] has no life to lose.[=0x0022=];[=0x000A=][=0x0009=][=0x0009=]stop the action.[=0x000A=][=0x000A=]Carry out an actor attacking something with something (this is the standard attacking it with a weapon rule):[=0x000A=][=0x0009=]decrease the current hit points of the noun by the damage inflicted;[=0x000A=][=0x0009=]if the noun is dead, remove the noun from play.[=0x000A=][=0x000A=][Though our checks and carry-out rules are similar regardless of who is acting, we[=0x0027=]re going to want actions to be described differently for different actors, so we[=0x0027=]ll use separate [=0x0022=]report attacking[=0x0022=] and [=0x0022=]report someone attacking[=0x0022=] rules. We[=0x0027=]ll also make some special cases for when the character has died as a result of the attack:][=0x000A=][=0x000A=]Report attacking a dead person with something (this is the death-report priority rule):[=0x000A=][=0x0009=]say [=0x0022=]You attack with [the second noun], killing [the noun]![=0x0022=] instead.[=0x000A=][=0x000A=]Report attacking someone with something (this is the normal attacking report rule):[=0x000A=][=0x0009=]say [=0x0022=]You attack [the noun] with [the second noun], causing [damage inflicted] point[s] of damage![=0x0022=] instead.[=0x000A=][=0x000A=]Report someone attacking the player with something when the player is dead (this is the player[=0x0027=]s-death priority rule):[=0x000A=][=0x0009=]say [=0x0022=][The actor] attacks you with [the second noun], finishing you off![=0x0022=];[=0x000A=][=0x0009=]end the game in death;[=0x000A=][=0x0009=]stop the action[=0x000A=][=0x000A=]Report someone attacking the player with something (this is the standard report someone attacking the player with rule):[=0x000A=][=0x0009=]say [=0x0022=][The actor] attacks you with [the second noun], causing [damage inflicted] point[s] of damage![=0x0022=] instead.[=0x000A=][=0x000A=]Report someone attacking something with something (this is the standard report attacking it with rule):[=0x000A=][=0x0009=]say [=0x0022=][The actor] attacks [the noun] with [the second noun], causing [damage inflicted] point[s] of damage![=0x0022=] instead.[=0x000A=][=0x000A=]When play begins:[=0x000A=][=0x0009=]change the left hand status line to [=0x0022=]You: [current hit points of player][=0x0022=];[=0x000A=][=0x0009=]change the right hand status line to [=0x0022=]Gladiator: [current hit points of gladiator][=0x0022=][=0x000A=][=0x000A=]Every turn (this is the gladiator-attack rule):[=0x000A=][=0x0009=]if the gladiator is not dead, try the gladiator attacking the player with a random weapon which is carried by the gladiator.[=0x000A=][=0x000A=]Test me with [=0x0022=]hit gladiator with mace / kill gladiator / drop mace / attack gladiator / attack gladiator with mace / g / g[=0x0022=].[=0x000A=][=0x000A=]');
}
</script>
<a href="javascript:pasteCode794()"><img border=0 src=../doc_images/paste.png></a> &quot;Lanista, Part Two&quot;
</font></blockquote><p>
<p>
<blockquote><font color="#000080">The Arena is a room. &quot;Sand, blood, iron. These festivals are normally held on hot days, but the sun has gone behind a cloud and fat drops of rain now and then spatter the arena floor.&quot; The gladiator is a man in the Arena. &quot;A bare-chested Scythian gladiator faces you, wielding [a list of weapons carried by the gladiator].&quot;
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Section 1 - Hit Points
</font></blockquote><p>
<p>
<blockquote><font color="#000080">A person has a number called maximum hit points. A person has a number called current hit points.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">The maximum hit points of the player is 35. The maximum hit points of the gladiator is 25.
</font></blockquote><p>
<p>
<p>In our simpler version of this example we set the current hit points by hand, but in a game with many characters this would get dull and repetitive, so here we'll use a &quot;when play begins&quot; to set all current hit point values automatically to maximum:
<p>
<blockquote><font color="#000080">When play begins:
<br>&nbsp;&nbsp;&nbsp;&nbsp;repeat with victim running through people:
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;now the current hit points of the victim is the maximum hit points of the victim.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Definition: a person is dead if his current hit points are less than 0.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Section 2 - Diagnosis
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Diagnosing is an action applying to one visible thing. Understand &quot;diagnose [something]&quot; as diagnosing.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Check diagnosing:
<br>&nbsp;&nbsp;&nbsp;&nbsp;if the noun is not a person, say &quot;Only people can have diagnoses.&quot; instead.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Carry out diagnosing:
<br>&nbsp;&nbsp;&nbsp;&nbsp;say &quot;[if the noun is the player]You have[otherwise][The noun] has[end if] [current hit points of the noun] out of a possible [maximum hit points of the noun] hit points remaining.&quot;
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Section 3 - Weapons
</font></blockquote><p>
<p>
<blockquote><font color="#000080">A weapon is a kind of thing. A weapon has a number called the maximum damage. The maximum damage of a weapon is usually 4.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">The gladiator carries a weapon called a trident. The maximum damage of the trident is 5. The gladiator carries a weapon called a net. The maximum damage of the net is 1.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">The player carries a weapon called a mace. The maximum damage of the mace is 3.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Section 4 - Attacking it with
</font></blockquote><p>
<p>
<p>In our new system, we want to specify what is being used for an attack. This means that we need to create a new &quot;attacking it with&quot; action, and also that we should disable the existing &quot;attacking...&quot; command.
<p>
<p>Here's why: If we leave the default attack command in place, Inform will continue to accept commands like >ATTACK GLADIATOR, but reply foolishly with the default &quot;Violence is not the answer...&quot; response.
<p>
<p>A somewhat better approach would be to change the reply of >ATTACK GLADIATOR to say something like &quot;You must specify a weapon to attack with.&quot; But this is still less than ideal, because it means that the player has to then rewrite his entire command. If, on the other hand, we take out &quot;ATTACK GLADIATOR&quot; entirely, the game will always prompt &quot;What do you want to attack the gladiator with?&quot; -- which teaches the player the correct command structure for this particular game, and avoids pretending to understand any command that is not meaningful within this game.
<p>
<p>This is a little bit of work because ATTACK has a lot of synonyms in the default library, but if we look through the actions index we can find them all:
<p>
<blockquote><font color="#000080">Understand the commands &quot;attack&quot; and &quot;punch&quot; and &quot;destroy&quot; and &quot;kill&quot; and &quot;murder&quot; and &quot;hit&quot; and &quot;thump&quot; and &quot;break&quot; and &quot;smash&quot; and &quot;torture&quot; and &quot;wreck&quot; as something new.
</font></blockquote><p>
<p>
<p>Now we make our new command:
<p>
<blockquote><font color="#000080">Attacking it with is an action applying to one visible thing and one carried thing. Understand &quot;attack [someone] with [something preferably held]&quot; as attacking it with.
</font></blockquote><p>
<p>
<p>Note that we've specified &quot;one carried thing&quot;, because we want the player to pick up a weapon to use if necessary. And now we assign all the old attack vocabulary to apply to the new command:
<p>
<blockquote><font color="#000080">Understand the commands &quot;punch&quot; and &quot;destroy&quot; and &quot;kill&quot; and &quot;murder&quot; and &quot;hit&quot; and &quot;thump&quot; and &quot;break&quot; and &quot;smash&quot; and &quot;torture&quot; and &quot;wreck&quot; as &quot;attack&quot;.
</font></blockquote><p>
<p>
<p>This may seem counter-intuitive, but order of source code matters here: we first get rid of the old, default vocabulary, then define our new action, then make the vocabulary apply to that new action. Inform will now understand >HIT GLADIATOR WITH TRIDENT, >BREAK GLADIATOR WITH TRIDENT, and so on.
<p>
<p>Our new action is also a perfect place to use an action variable: we're going to need to choose an amount of damage done and refer to that several times in our action rules. So let's set that up first:
<p>
<blockquote><font color="#000080">The attacking it with action has a number called the damage inflicted.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Setting action variables for attacking something with something:
<br>&nbsp;&nbsp;&nbsp;&nbsp;if the second noun is a weapon:
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let the maximum attack be the maximum damage of the second noun;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;change the damage inflicted to a random number between 1 and the maximum attack.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Check an actor attacking something with something (this is the can't attack with something that isn't a weapon rule):
<br>&nbsp;&nbsp;&nbsp;&nbsp;if the second noun is not a weapon:
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if the actor is the player, say &quot;[The second noun] does not qualify as a weapon.&quot;;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stop the action.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Check an actor attacking something with something (this is the can't attack a non-person rule):
<br>&nbsp;&nbsp;&nbsp;&nbsp;if the noun is not a person:
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if the actor is the player, say &quot;[The noun] has no life to lose.&quot;;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stop the action.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Carry out an actor attacking something with something (this is the standard attacking it with a weapon rule):
<br>&nbsp;&nbsp;&nbsp;&nbsp;decrease the current hit points of the noun by the damage inflicted;
<br>&nbsp;&nbsp;&nbsp;&nbsp;if the noun is dead, remove the noun from play.
</font></blockquote><p>
<p>
<p>Though our checks and carry-out rules are similar regardless of who is acting, we're going to want actions to be described differently for different actors, so we'll use separate &quot;report attacking&quot; and &quot;report someone attacking&quot; rules. We'll also make some special cases for when the character has died as a result of the attack:
<p>
<blockquote><font color="#000080">Report attacking a dead person with something (this is the death-report priority rule):
<br>&nbsp;&nbsp;&nbsp;&nbsp;say &quot;You attack with [the second noun], killing [the noun]!&quot; instead.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Report attacking someone with something (this is the normal attacking report rule):
<br>&nbsp;&nbsp;&nbsp;&nbsp;say &quot;You attack [the noun] with [the second noun], causing [damage inflicted] point[s] of damage!&quot; instead.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Report someone attacking the player with something when the player is dead (this is the player's-death priority rule):
<br>&nbsp;&nbsp;&nbsp;&nbsp;say &quot;[The actor] attacks you with [the second noun], finishing you off!&quot;;
<br>&nbsp;&nbsp;&nbsp;&nbsp;end the game in death;
<br>&nbsp;&nbsp;&nbsp;&nbsp;stop the action
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Report someone attacking the player with something (this is the standard report someone attacking the player with rule):
<br>&nbsp;&nbsp;&nbsp;&nbsp;say &quot;[The actor] attacks you with [the second noun], causing [damage inflicted] point[s] of damage!&quot; instead.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Report someone attacking something with something (this is the standard report attacking it with rule):
<br>&nbsp;&nbsp;&nbsp;&nbsp;say &quot;[The actor] attacks [the noun] with [the second noun], causing [damage inflicted] point[s] of damage!&quot; instead.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">When play begins:
<br>&nbsp;&nbsp;&nbsp;&nbsp;change the left hand status line to &quot;You: [current hit points of player]&quot;;
<br>&nbsp;&nbsp;&nbsp;&nbsp;change the right hand status line to &quot;Gladiator: [current hit points of gladiator]&quot;
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Every turn (this is the gladiator-attack rule):
<br>&nbsp;&nbsp;&nbsp;&nbsp;if the gladiator is not dead, try the gladiator attacking the player with a random weapon which is carried by the gladiator.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Test me with &quot;hit gladiator with mace / kill gladiator / drop mace / attack gladiator / attack gladiator with mace / g / g&quot;.
</font></blockquote><p>
<p>
<p>Those devoted to role-playing will note that our form of randomization is still pretty naive: most RPG systems use multiple dice in order to create more interesting probability curves. For a system that simulates actual dice-rolling, see the full &quot;Reliques of Tolti-Aph&quot; game.
<table CELLPADDING=0 CELLSPACING=0 width="100%" height=18><tr><td width="100%"> </td><td width=18 align="left" bgcolor="#000000"><a href=Rdoc48.html><img src=../doc_images/Hookclose.png id="hookclose" style="height: 17px; width: 17px;" border="0"></a></td><td width=4></td></tr></table></td></tr></table><p>
<!-- EXAMPLE END -->
<a name="e163"><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><td halign="left" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="oval"><TD width=38px height=30px align="left" valign="center"><a href=Rex163.html#e163 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><b>192</b></div></a></TD></TR></TABLE></td><td CELLPADDING=0 CELLSPACING=0 halign="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><a href=Rex163.html#e163 STYLE="text-decoration: none"><img border="0" style="height: 15px; width: 13px;" alt="*" src='../doc_images/asterisk.png'><img border="0" style="height: 15px; width: 13px;" alt="*" src='../doc_images/asterisk.png'><b><font color="#505050">&nbsp;Example&nbsp;</font> <font color="#000000"> Puff of Orange Smoke</font></b></a><br>A system in which every character has a body, which is left behind when the person dies; attempts to do something to the body are redirected to the person while the person is alive.<p></td><td halign="right" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="wiarrow"><TD width=38px height=30px align="left" valign="center"><a  href=ex163.html#e163 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><i>WI</i></div></a></TD></TR></TABLE></td></tr></table>
<a name="e317"><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><td halign="left" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="oval"><TD width=38px height=30px align="left" valign="center"><a href=Rex317.html#e317 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><b>120</b></div></a></TD></TR></TABLE></td><td CELLPADDING=0 CELLSPACING=0 halign="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><a href=Rex317.html#e317 STYLE="text-decoration: none"><img border="0" style="height: 15px; width: 13px;" alt="*" src='../doc_images/asterisk.png'><img border="0" style="height: 15px; width: 13px;" alt="*" src='../doc_images/asterisk.png'><img border="0" style="height: 15px; width: 13px;" alt="*" src='../doc_images/asterisk.png'><b><font color="#505050">&nbsp;Example&nbsp;</font> <font color="#000000"> Technological Terror</font></b></a><br>A ray gun which destroys objects, leaving their component parts behind.<p></td><td halign="right" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="wiarrow"><TD width=38px height=30px align="left" valign="center"><a  href=ex317.html#e317 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><i>WI</i></div></a></TD></TR></TABLE></td></tr></table>
<a name="e27"><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><td halign="left" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="oval"><TD width=38px height=30px align="left" valign="center"><a href=Rex27.html#e27 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><b>108</b></div></a></TD></TR></TABLE></td><td CELLPADDING=0 CELLSPACING=0 halign="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><a href=Rex27.html#e27 STYLE="text-decoration: none"><img border="0" style="height: 15px; width: 13px;" alt="*" src='../doc_images/asterisk.png'><img border="0" style="height: 15px; width: 13px;" alt="*" src='../doc_images/asterisk.png'><img border="0" style="height: 15px; width: 13px;" alt="*" src='../doc_images/asterisk.png'><b><font color="#505050">&nbsp;Example&nbsp;</font> <font color="#000000"> Don Pedro's Revenge</font></b></a><br>Combat scenario in which the player's footing and position changes from move to move, and the command prompt also changes to reflect that.<p></td><td halign="right" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="wiarrow"><TD width=38px height=30px align="left" valign="center"><a  href=ex27.html#e27 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><i>WI</i></div></a></TD></TR></TABLE></td></tr></table>
<p><hr><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><td width="33%" align="left"><a href=Rdoc47.html border=0 STYLE="text-decoration: none"><font color="808080" size="2">Previous</font></a></td><td width="33%" align="center"><a href=../Rindex.html border=0 STYLE="text-decoration: none"><font color="808080" size="2">Contents</font></a></td><td width="33%" align="right"><a href=Rdoc49.html border=0 STYLE="text-decoration: none"><font color="808080" size="2">Next</font></a></td></tr></table></font></body></html>
