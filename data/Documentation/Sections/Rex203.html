<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>4.3. Event Scheduling</title></head>
<STYLE TYPE="text/css">
<!--
.oval, .oval TD
{
background-image:url('../doc_images/ovoid.png');
color:white;
}
.wiarrow, .wiarrow TD
{
background-image:url('../doc_images/wiarrow.png');
color:white;
}
.rbarrow, .rbarrow TD
{
background-image:url('../doc_images/rbarrow.png');
color:white;
}
-->
</STYLE>
<body bgcolor="#FFFFE0">
<!-- SEARCH TITLE "IPA" -->
<!-- SEARCH SECTION "Ex 129" -->
<!-- SEARCH SORT "Ex 004-003-129" -->
<font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><table CELLPADDING=0 CELLSPACING=0 width="100%" bgcolor="#000000"><tr><TD width=38px height=26px align="center" valign="center"><a href=Rdoc17.html border=0><img border=0 src=../doc_images/Hookleft.png id="hookleft" style="height: 24px; width: 32px;" border=0></a></td><td halign="left" valign="center" CELLPADDING=0 CELLSPACING=0><a href=../Rchap4.html STYLE="text-decoration: none"><font color="#FFFFE0" size=2>Chapter 4: Time and Plot</font></a></td><TD width=56px height=26px align="right" valign="center"><a href=../Rindex.html border=0><img border=0 src=../doc_images/Hookup.png id="hookup" style="height: 24px; width: 24px;" border=0></a><a href=Rdoc19.html border=0><img border=0 src=../doc_images/Hookright.png id="hookright" style="height: 24px; width: 32px;" border=0></a></td></tr></table><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><TD height=8px halign="center" valign="center"></td></tr></table><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><TD width=38px halign="center" valign="center"></td><td halign="left" valign="center" CELLPADDING=0 CELLSPACING=0><font color="#000000" size="3"><b>4.3. Event Scheduling</b></font></td></tr></table>
<p>
<p>We can use a schedule of events to give some life to our environment: if we have a town setting, for instance, it makes sense for shops and libraries to open and close at set times; this is just what we find in <b>IPA</b>.
<p>
<p><b>Air Conditioning Is Standard</b> has characters who follow a timed schedule of events to interact with each other, while the player mostly wanders around missing out on the action. (Sometimes life is like that.) The same effects could have been achieved with scenes instead of clock times, but there are occasions when we do want to plan our characters' behavior to the minute rather than waiting for the player to be in the right place to observe it: in a murder mystery or a time-travel story, the exact timings might be quite significant.
<p>
<p>We may also want to add events to the schedule during play, as in
<p>
<blockquote><font color="#000080"> Instead of pushing the egg-timer: say &quot;It begins to mark time.&quot;; the egg-timer clucks in four turns from now.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">At the time when the egg-timer clucks: say &quot;Cluck! Cluck! Cluck! says the egg-timer.&quot;
</font></blockquote><p>
<p>
<p>Similarly, we can schedule things during play to happen at a specific time of day, as shown in <b>Hour of the Wren</b>.
<p>
<a href=Rdoc19.html STYLE="text-decoration: none"><font color=\"#000000\"><img border="0" style="height: 15px; width: 13px;" alt="*" src='../doc_images/diamond.png'>&nbsp;<i>See </i><b>Scene Changes</b></font></a><i> for more things that arrive at pre-determined times</i><p><p>
<a href=Rdoc56.html STYLE="text-decoration: none"><font color=\"#000000\"><img border="0" style="height: 15px; width: 13px;" alt="*" src='../doc_images/diamond.png'>&nbsp;<i>See </i><b>Ships, Trains and Elevators</b></font></a><i> for a train that follows a schedule, carrying the player along if he is aboard</i><p><p>
<p><hr><p>
<!-- EXAMPLE START -->
<a name="e203"><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><td halign="left" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="oval"><TD width=38px height=30px align="left" valign="center"><a href=Rdoc18.html#e203 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><b>129</b></div></a></TD></TR></TABLE></td><td CELLPADDING=0 CELLSPACING=0 halign="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><a href=Rdoc18.html#e203 STYLE="text-decoration: none"><img border="0" style="height: 15px; width: 13px;" alt="*" src='../doc_images/asterisk.png'><img border="0" style="height: 15px; width: 13px;" alt="*" src='../doc_images/asterisk.png'><b><font color="#505050">&nbsp;<b>Example</b>&nbsp;</font> <font color="#000000"> IPA</font></b></a><br>Shops which each have opening and closing hours, so that it is impossible to go in at the wrong times, and the player is kicked out if he overstays his welcome.<p></td><td halign="right" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="wiarrow"><TD width=38px height=30px align="left" valign="center"><a  href=ex203.html#e203 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><i>WI</i></div></a></TD></TR></TABLE></td></tr></table>
<table border=0 bgcolor="#ffffc0" width=100%><tr><td><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2>
<p>
<p>Suppose we wanted a game set in a living town, with locations opening and closing at different times of day, and business carrying on as usual. The point might be to force the player to plan his itinerary carefully to hit the right spots at the right times; or we might be writing a more contemplative piece, where part of the enjoyment came from just watching the characters wander around doing their daily business...
<p>
<blockquote><font color="#000080"><script language="JavaScript">
function pasteCode625(code) {
    var myProject = external.Project;

    myProject.selectView('source');
    myProject.pasteCode('[=0x0022=]IPA[=0x0022=][=0x000A=][=0x000A=]When play begins: change the right hand status line to [=0x0022=][time of day][=0x0022=].[=0x000A=][=0x000A=]The time of day is 9:50 AM.[=0x000A=][=0x000A=]A shop is a kind of room. A shop has a time called the opening hour. The opening hour of the shop is usually 8 AM. A shop has a time called the closing hour. A shop usually has closing hour 6 PM.[=0x000A=][=0x000A=]Check going to a shop (called the target):[=0x000A=][=0x0009=]if the time of day is before the opening hour of the target,[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=][The target] is locked up until [the opening hour of the target].[=0x0022=] instead.[=0x000A=][=0x000A=]Check going to a shop (called the target):[=0x000A=][=0x0009=]if the time of day is after the closing hour of the target,[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=][The target] has been closed since [the closing hour of the target].[=0x0022=] instead.[=0x000A=][=0x000A=]Every turn when the location is a shop:[=0x000A=][=0x0009=]let deadline be the closing hour of the location;[=0x000A=][=0x0009=]if the deadline is before the time of day[=0x000A=][=0x0009=]begin;[=0x000A=][=0x0009=][=0x0009=]let target be a random adjacent room which is not a shop;[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]You are gently but firmly ushered out, since [the location] is closing.[=0x0022=];[=0x000A=][=0x0009=][=0x0009=]move the player to the target;[=0x000A=][=0x0009=]end if.[=0x000A=][=0x000A=]The Strip-mall Parking Lot is a room. [=0x0022=]Dead Christmas trees are heaped outside the bagel shop. Strips of dirty ice survive along the curb, and in the shadows of the lamp-posts. A wet, almost illegible sheet of algebra homework is plastered to the asphalt.[=0x000A=][=0x000A=]Pinewood Brewing Supply is at the east end of the lot.[=0x0022=][=0x000A=][=0x000A=]Pinewood Brewing Supply is a shop. It is east of Parking Lot. The opening hour of Pinewood Brewing Supply is 10:00 AM. The closing hour of Pinewood Brewing Supply is 3:30 PM. [=0x0022=]Shelves and shelves of malt and hops; large glass carboys, and plastic tubing; empty bottles; bottle-caps; bottle-labeling kits; starters for vinegar, sourdough, root beer.[=0x000A=][=0x000A=]A sweet malty smell hangs in the air.[=0x0022=][=0x000A=][=0x000A=]Instead of going to Brewing Supply when the time of day is before the opening hour of Brewing Supply for the second time:[=0x000A=][=0x0009=]say [=0x0022=]You rattle at the door again. [=0x0027=]Hold your horses, for crying out loud,[=0x0027=] yells a voice from within.[=0x0022=][=0x000A=][=0x000A=]Noah[=0x0027=]s Bagels is a shop. It is north of the Parking Lot. The opening hour of Noah[=0x0027=]s Bagels is 6:00 AM. The closing hour of Noah[=0x0027=]s Bagels is 11:00 AM. [=0x0022=]The selection has been somewhat picked over, leaving you with your choice of Pumpernickel, Asiago, or Everything.[=0x0022=][=0x000A=][=0x000A=]Test me with [=0x0022=]e / e / n / z / s / e / z / e / z / z / e[=0x0022=].[=0x000A=]');
}
</script>
<a href="javascript:pasteCode625()"><img border=0 src=../doc_images/paste.png></a> &quot;IPA&quot;
</font></blockquote><p>
<p>
<blockquote><font color="#000080">When play begins: change the right hand status line to &quot;[time of day]&quot;.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">The time of day is 9:50 AM.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">A shop is a kind of room. A shop has a time called the opening hour. The opening hour of the shop is usually 8 AM. A shop has a time called the closing hour. A shop usually has closing hour 6 PM.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Check going to a shop (called the target):
<br>&nbsp;&nbsp;&nbsp;&nbsp;if the time of day is before the opening hour of the target,
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;say &quot;[The target] is locked up until [the opening hour of the target].&quot; instead.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Check going to a shop (called the target):
<br>&nbsp;&nbsp;&nbsp;&nbsp;if the time of day is after the closing hour of the target,
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;say &quot;[The target] has been closed since [the closing hour of the target].&quot; instead.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Every turn when the location is a shop:
<br>&nbsp;&nbsp;&nbsp;&nbsp;let deadline be the closing hour of the location;
<br>&nbsp;&nbsp;&nbsp;&nbsp;if the deadline is before the time of day
<br>&nbsp;&nbsp;&nbsp;&nbsp;begin;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let target be a random adjacent room which is not a shop;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;say &quot;You are gently but firmly ushered out, since [the location] is closing.&quot;;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;move the player to the target;
<br>&nbsp;&nbsp;&nbsp;&nbsp;end if.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">The Strip-mall Parking Lot is a room. &quot;Dead Christmas trees are heaped outside the bagel shop. Strips of dirty ice survive along the curb, and in the shadows of the lamp-posts. A wet, almost illegible sheet of algebra homework is plastered to the asphalt.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Pinewood Brewing Supply is at the east end of the lot.&quot;
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Pinewood Brewing Supply is a shop. It is east of Parking Lot. The opening hour of Pinewood Brewing Supply is 10:00 AM. The closing hour of Pinewood Brewing Supply is 3:30 PM. &quot;Shelves and shelves of malt and hops; large glass carboys, and plastic tubing; empty bottles; bottle-caps; bottle-labeling kits; starters for vinegar, sourdough, root beer.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">A sweet malty smell hangs in the air.&quot;
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Instead of going to Brewing Supply when the time of day is before the opening hour of Brewing Supply for the second time:
<br>&nbsp;&nbsp;&nbsp;&nbsp;say &quot;You rattle at the door again. 'Hold your horses, for crying out loud,' yells a voice from within.&quot;
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Noah's Bagels is a shop. It is north of the Parking Lot. The opening hour of Noah's Bagels is 6:00 AM. The closing hour of Noah's Bagels is 11:00 AM. &quot;The selection has been somewhat picked over, leaving you with your choice of Pumpernickel, Asiago, or Everything.&quot;
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Test me with &quot;e / e / n / z / s / e / z / e / z / z / e&quot;.
</font></blockquote><p>
<table CELLPADDING=0 CELLSPACING=0 width="100%" height=18><tr><td width="100%"> </td><td width=18 align="left" bgcolor="#000000"><a href=Rdoc18.html><img src=../doc_images/Hookclose.png id="hookclose" style="height: 17px; width: 17px;" border="0"></a></td><td width=4></td></tr></table></td></tr></table><p>
<!-- EXAMPLE END -->
<a name="e242"><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><td halign="left" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="oval"><TD width=38px height=30px align="left" valign="center"><a href=Rex242.html#e242 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><b>311</b></div></a></TD></TR></TABLE></td><td CELLPADDING=0 CELLSPACING=0 halign="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><a href=Rex242.html#e242 STYLE="text-decoration: none"><img border="0" style="height: 15px; width: 13px;" alt="*" src='../doc_images/asterisk.png'><img border="0" style="height: 15px; width: 13px;" alt="*" src='../doc_images/asterisk.png'><img border="0" style="height: 15px; width: 13px;" alt="*" src='../doc_images/asterisk.png'><img border="0" style="height: 15px; width: 13px;" alt="*" src='../doc_images/asterisk.png'><b><font color="#505050">&nbsp;Example&nbsp;</font> <font color="#000000"> Air Conditioning is Standard</font></b></a><br>Uses "writing a paragraph about" to make person and object descriptions that vary considerably depending on what else is going on in the room, including some randomized NPC interactions with objects or with each other.<p></td><td halign="right" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="wiarrow"><TD width=38px height=30px align="left" valign="center"><a  href=ex242.html#e242 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><i>WI</i></div></a></TD></TR></TABLE></td></tr></table>
<a name="e261"><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><td halign="left" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="oval"><TD width=38px height=30px align="left" valign="center"><a href=Rex261.html#e261 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><b>134</b></div></a></TD></TR></TABLE></td><td CELLPADDING=0 CELLSPACING=0 halign="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><a href=Rex261.html#e261 STYLE="text-decoration: none"><img border="0" style="height: 15px; width: 13px;" alt="*" src='../doc_images/asterisk.png'><img border="0" style="height: 15px; width: 13px;" alt="*" src='../doc_images/asterisk.png'><img border="0" style="height: 15px; width: 13px;" alt="*" src='../doc_images/asterisk.png'><b><font color="#505050">&nbsp;Example&nbsp;</font> <font color="#000000"> Hour of the Wren</font></b></a><br>Allowing the player to make an appointment, which is then kept.<p></td><td halign="right" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="wiarrow"><TD width=38px height=30px align="left" valign="center"><a  href=ex261.html#e261 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><i>WI</i></div></a></TD></TR></TABLE></td></tr></table>
<p><hr><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><td width="33%" align="left"><a href=Rdoc17.html border=0 STYLE="text-decoration: none"><font color="808080" size="2">Previous</font></a></td><td width="33%" align="center"><a href=../Rindex.html border=0 STYLE="text-decoration: none"><font color="808080" size="2">Contents</font></a></td><td width="33%" align="right"><a href=Rdoc19.html border=0 STYLE="text-decoration: none"><font color="808080" size="2">Next</font></a></td></tr></table></font></body></html>
