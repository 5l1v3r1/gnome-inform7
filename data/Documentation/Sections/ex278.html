<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>23.19. Longer extracts of Inform 6 code</title></head>
<STYLE TYPE="text/css">
<!--
.oval, .oval TD
{
background-image:url('../doc_images/ovoid.png');
color:white;
}
.wiarrow, .wiarrow TD
{
background-image:url('../doc_images/wiarrow.png');
color:white;
}
.rbarrow, .rbarrow TD
{
background-image:url('../doc_images/rbarrow.png');
color:white;
}
-->
</STYLE>
<body bgcolor="#ffffff">
<!-- SEARCH TITLE "Status line with centered text, the hard way" -->
<!-- SEARCH SECTION "Ex 394" -->
<!-- SEARCH SORT "Ex 023-019-394" -->
<font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><table CELLPADDING=0 CELLSPACING=0 width="100%" bgcolor="#000000"><tr><TD width=38px height=26px align="center" valign="center"><a href=doc390.html border=0><img border=0 src=../doc_images/Hookleft.png id="hookleft" style="height: 24px; width: 32px;" border=0></a></td><td halign="left" valign="center" CELLPADDING=0 CELLSPACING=0><a href=../chap23.html STYLE="text-decoration: none"><font color="#FFFFFF" size=2>Chapter 23: Extensions</font></a></td><TD width=56px height=26px align="right" valign="center"><a href=../index.html border=0><img border=0 src=../doc_images/Hookup.png id="hookup" style="height: 24px; width: 24px;" border=0></a><a href=doc392.html border=0><img border=0 src=../doc_images/Hookright.png id="hookright" style="height: 24px; width: 32px;" border=0></a></td></tr></table><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><TD height=8px halign="center" valign="center"></td></tr></table><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><TD width=38px halign="center" valign="center"></td><td halign="left" valign="center" CELLPADDING=0 CELLSPACING=0><font color="#000000" size="3"><b>23.19. Longer extracts of Inform 6 code</b></font></td></tr></table>
<p>
<p>Whole routines, object and class definitions (or any other directives) can be pasted in wholesale using sentences like so:
<p>
<blockquote><font color="#000080">Include (-
<br>[ MyInform6Routine a b; return a*b; ];
<br>-).
</font></blockquote><p>
<p>
<p>Such inclusions are pasted into the final compiled code at the end of the file, after the I6 grammar has been declared.
<p>
<p>In such extracts, we sometimes need to refer to objects, variables or values which can't be described using I6: or rather, which can be described, but we don't know how. To this end, any text in an inclusion written in &quot;(+&quot; and &quot;+)&quot; parentheses is treated as an I7 value, and compiled accordingly, with all type-checking waived for the occasion. For instance:
<p>
<blockquote><font color="#000080">Include (-
<br>Global my_global = (+ the tartan rucksack +);
<br>-).
</font></blockquote><p>
<p>
<p>Here &quot;the tartan rucksack&quot; is translated into &quot;O18_tartan_rucksack&quot;, or something similar: the I6 object created to represent the rucksack. Thus the actual line of code produced is
<p>
<blockquote><font color="#000080">Global my_global = O18_tartan_rucksack;
</font></blockquote><p>
<p>
<p>Note that the brace notation seen before for Inform 6-defined inline phrases is not allowed here. But this is better anyway.
<p>
<p>The Standard Rules make use of the notation:
<p>
<blockquote><font color="#000080">Include (-
<br>&nbsp;&nbsp;&nbsp;&nbsp;...
<br>-) before the library.
</font></blockquote><p>
<p>
<p>the reference being to the I6 code appearing before the I6 library is included. Extension writers are asked not to use this if they can possibly avoid it, and are warned that creating I6 attributes or properties may cause I7 code to misbehave. (If new properties are needed, they should be created in I7 and referred to using the &quot;(+&quot; notation.)
<p>
<p><hr><p>
<!-- EXAMPLE START -->
<a name="e278"><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><td halign="left" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="oval"><TD width=38px height=30px align="left" valign="center"><a href=doc391.html#e278 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><b>394</b></div></a></TD></TR></TABLE></td><td CELLPADDING=0 CELLSPACING=0 halign="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><a href=doc391.html#e278 STYLE="text-decoration: none"><img border="0" style="height: 15px; width: 13px;" alt="*" src='../doc_images/asterisk.png'><b><font color="#505050">&nbsp;<b>Example</b>&nbsp;</font> <font color="#000000">Status line with centered text, the hard way</font></b></a><br>A status line which has only the name of the location, centered.<p></td><td halign="right" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="rbarrow"><TD width=38px height=30px align="left" valign="center"><a  href=Rex278.html#e278 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><i>RB</i></div></a></TD></TR></TABLE></td></tr></table>
<table border=0 bgcolor="#f0f0f0" width=100%><tr><td><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2>
<p>
<p>Making major changes to display features, such as the construction of the status line, sometimes requires that we rely on Inform 6 in bulk; here is how we might produce the Trinity-style status line, with the location centered at the top center of the screen.
<p>
<blockquote><font color="#000080"><script language="JavaScript">
function pasteCode483(code) {
    var myProject = external.Project;

    myProject.selectView('source');
    myProject.pasteCode('[=0x0022=]Corner of No and Where[=0x0022=][=0x000A=][=0x000A=]No is a room. Where is west of No.[=0x000A=][=0x000A=]Rule for constructing the status line:[=0x000A=][=0x0009=]print the location in the center of the status line;[=0x000A=][=0x0009=]rule succeeds.[=0x000A=][=0x000A=]To print the location in the center of the status line:[=0x000A=][=0x0009=](- PrintCenteredStatus(); -);[=0x000A=][=0x000A=]Include (-[=0x000A=][=0x000A=]Array printed_text --[=0x003E=] 64;[=0x000A=][=0x000A=][ PrintCenteredStatus i j;[=0x000A=][=0x0009=]@set_cursor 1 0;[=0x000A=][=0x0009=]i = 0-[=0x003E=]33;[=0x000A=][=0x0009=]spaces(i);[=0x000A=][=0x0009=]@output_stream 3 printed_text;[=0x000A=][=0x0009=]print (name) location;[=0x000A=][=0x0009=]@output_stream -3;[=0x000A=][=0x0009=]j = (i - (printed_text--[=0x003E=]0))/2;[=0x000A=][=0x0009=]@set_cursor 1 j;[=0x000A=][=0x0009=]print (name) location;[=0x000A=][=0x0009=]spaces j-1;[=0x000A=]];[=0x000A=][=0x000A=]-)[=0x000A=][=0x000A=]Test me with [=0x0022=]w / e[=0x0022=].[=0x000A=][=0x000A=]');
}
</script>
<a href="javascript:pasteCode483()"><img border=0 src=../doc_images/paste.png></a> &quot;Corner of No and Where&quot;
</font></blockquote><p>
<p>
<blockquote><font color="#000080">No is a room. Where is west of No.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Rule for constructing the status line:
<br>&nbsp;&nbsp;&nbsp;&nbsp;print the location in the center of the status line;
<br>&nbsp;&nbsp;&nbsp;&nbsp;rule succeeds.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">To print the location in the center of the status line:
<br>&nbsp;&nbsp;&nbsp;&nbsp;(- PrintCenteredStatus(); -);
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Include (-
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Array printed_text --> 64;
</font></blockquote><p>
<p>
<blockquote><font color="#000080">[ PrintCenteredStatus i j;
<br>&nbsp;&nbsp;&nbsp;&nbsp;@set_cursor 1 0;
<br>&nbsp;&nbsp;&nbsp;&nbsp;i = 0->33;
<br>&nbsp;&nbsp;&nbsp;&nbsp;spaces(i);
<br>&nbsp;&nbsp;&nbsp;&nbsp;@output_stream 3 printed_text;
<br>&nbsp;&nbsp;&nbsp;&nbsp;print (name) location;
<br>&nbsp;&nbsp;&nbsp;&nbsp;@output_stream -3;
<br>&nbsp;&nbsp;&nbsp;&nbsp;j = (i - (printed_text-->0))/2;
<br>&nbsp;&nbsp;&nbsp;&nbsp;@set_cursor 1 j;
<br>&nbsp;&nbsp;&nbsp;&nbsp;print (name) location;
<br>&nbsp;&nbsp;&nbsp;&nbsp;spaces j-1;
<br>];
</font></blockquote><p>
<p>
<blockquote><font color="#000080">-)
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Test me with &quot;w / e&quot;.
</font></blockquote><p>
<p>
<p>In fact, as we've already seen, many extra modifications to the display behavior are possible using Basic Screen Effects.
<table CELLPADDING=0 CELLSPACING=0 width="100%" height=18><tr><td width="100%"> </td><td width=18 align="left" bgcolor="#000000"><a href=doc391.html><img src=../doc_images/Hookclose.png id="hookclose" style="height: 17px; width: 17px;" border="0"></a></td><td width=4></td></tr></table></td></tr></table><p>
<!-- EXAMPLE END -->
<p><hr><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><td width="33%" align="left"><a href=doc390.html border=0 STYLE="text-decoration: none"><font color="808080" size="2">Previous</font></a></td><td width="33%" align="center"><a href=../index.html border=0 STYLE="text-decoration: none"><font color="808080" size="2">Contents</font></a></td><td width="33%" align="right"><a href=doc392.html border=0 STYLE="text-decoration: none"><font color="808080" size="2">Next</font></a></td></tr></table></font></body></html>
