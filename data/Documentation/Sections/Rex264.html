<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>6.5. Examining</title></head>
<STYLE TYPE="text/css">
<!--
.oval, .oval TD
{
background-image:url('../doc_images/ovoid.png');
color:white;
}
.wiarrow, .wiarrow TD
{
background-image:url('../doc_images/wiarrow.png');
color:white;
}
.rbarrow, .rbarrow TD
{
background-image:url('../doc_images/rbarrow.png');
color:white;
}
-->
</STYLE>
<body bgcolor="#FFFFE0">
<!-- SEARCH TITLE "The Left Hand of Autumn" -->
<!-- SEARCH SECTION "Ex 269" -->
<!-- SEARCH SORT "Ex 006-005-269" -->
<font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><table CELLPADDING=0 CELLSPACING=0 width="100%" bgcolor="#000000"><tr><TD width=38px height=26px align="center" valign="center"><a href=Rdoc30.html border=0><img border=0 src=../doc_images/Hookleft.png id="hookleft" style="height: 24px; width: 32px;" border=0></a></td><td halign="left" valign="center" CELLPADDING=0 CELLSPACING=0><a href=../Rchap6.html STYLE="text-decoration: none"><font color="#FFFFE0" size=2>Chapter 6: Commands</font></a></td><TD width=56px height=26px align="right" valign="center"><a href=../Rindex.html border=0><img border=0 src=../doc_images/Hookup.png id="hookup" style="height: 24px; width: 24px;" border=0></a><a href=Rdoc32.html border=0><img border=0 src=../doc_images/Hookright.png id="hookright" style="height: 24px; width: 32px;" border=0></a></td></tr></table><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><TD height=8px halign="center" valign="center"></td></tr></table><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><TD width=38px halign="center" valign="center"></td><td halign="left" valign="center" CELLPADDING=0 CELLSPACING=0><font color="#000000" size="3"><b>6.5. Examining</b></font></td></tr></table>
<p>
<p>By default, examining an object shows its description, and - for devices - tells us whether the object is switched on or switched off.
<p>
<p>This kind of additional information is not always what we want, so if we have a device whose on/off status we want to conceal, we may write
<p>
<blockquote><font color="#000080">The examine described devices rule is not listed in any rulebook.
</font></blockquote><p>
<p>
<p>On the other hand, there are times when we may want to add a similar line or two to the descriptions of other kinds of objects. <b>Waxwork</b> shows how to make containers and supporters automatically list everything they're holding when examined, while <b>Crusoe</b> allows us to append an &quot;It is charred.&quot; sentence to the end of descriptions of things we have burned in the fire. Since it works by introducing a &quot;printing the description&quot; activity, Crusoe is also a good example to start from if we want to introduce more complex, flexible descriptions of items throughout our game.
<p>
<p><b>Odin</b> rewrites the &quot;You see nothing special...&quot; line with other text of our own, for items that otherwise do not have a description.
<p>
<p>Finally, we may want to look at multiple things at once. <b>Shawn's Bad Day</b> allows the player to EXAMINE ALL; <b>The Left Hand of Autumn</b> demonstrates how we might provide a different response for EXAMINE PAINTINGS than for examining each individually; and <b>Examining everything at once</b> provides a SEARCH command that will show the descriptions of all the scenery in the current location.
<p>
<p><hr><p>
<a name="e288"><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><td halign="left" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="oval"><TD width=38px height=30px align="left" valign="center"><a href=Rex288.html#e288 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><b>184</b></div></a></TD></TR></TABLE></td><td CELLPADDING=0 CELLSPACING=0 halign="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><a href=Rex288.html#e288 STYLE="text-decoration: none"><img border="0" style="height: 15px; width: 13px;" alt="*" src='../doc_images/asterisk.png'><b><font color="#505050">&nbsp;Example&nbsp;</font> <font color="#000000"> Waxwork</font></b></a><br>Containers and supporters that report their contents when you EXAMINE them.<p></td><td halign="right" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="wiarrow"><TD width=38px height=30px align="left" valign="center"><a  href=ex288.html#e288 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><i>WI</i></div></a></TD></TR></TABLE></td></tr></table>
<a name="e201"><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><td halign="left" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="oval"><TD width=38px height=30px align="left" valign="center"><a href=Rex201.html#e201 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><b>304</b></div></a></TD></TR></TABLE></td><td CELLPADDING=0 CELLSPACING=0 halign="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><a href=Rex201.html#e201 STYLE="text-decoration: none"><img border="0" style="height: 15px; width: 13px;" alt="*" src='../doc_images/asterisk.png'><img border="0" style="height: 15px; width: 13px;" alt="*" src='../doc_images/asterisk.png'><img border="0" style="height: 15px; width: 13px;" alt="*" src='../doc_images/asterisk.png'><b><font color="#505050">&nbsp;Example&nbsp;</font> <font color="#000000"> Crusoe</font></b></a><br>Adding a "printing the description of something" activity.<p></td><td halign="right" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="wiarrow"><TD width=38px height=30px align="left" valign="center"><a  href=ex201.html#e201 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><i>WI</i></div></a></TD></TR></TABLE></td></tr></table>
<a name="e360"><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><td halign="left" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="oval"><TD width=38px height=30px align="left" valign="center"><a href=Rex360.html#e360 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><b>41</b></div></a></TD></TR></TABLE></td><td CELLPADDING=0 CELLSPACING=0 halign="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><a href=Rex360.html#e360 STYLE="text-decoration: none"><img border="0" style="height: 15px; width: 13px;" alt="*" src='../doc_images/asterisk.png'><b><font color="#505050">&nbsp;Example&nbsp;</font> <font color="#000000"> Odin</font></b></a><br>Replacing "You see nothing special..." with a different default message for looking at something nondescript.<p></td><td halign="right" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="wiarrow"><TD width=38px height=30px align="left" valign="center"><a  href=ex360.html#e360 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><i>WI</i></div></a></TD></TR></TABLE></td></tr></table>
<a name="e165"><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><td halign="left" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="oval"><TD width=38px height=30px align="left" valign="center"><a href=Rex165.html#e165 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><b>268</b></div></a></TD></TR></TABLE></td><td CELLPADDING=0 CELLSPACING=0 halign="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><a href=Rex165.html#e165 STYLE="text-decoration: none"><img border="0" style="height: 15px; width: 13px;" alt="*" src='../doc_images/asterisk.png'><b><font color="#505050">&nbsp;Example&nbsp;</font> <font color="#000000"> Shawn's Bad Day</font></b></a><br>Allowing the player to EXAMINE ALL.<p></td><td halign="right" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="wiarrow"><TD width=38px height=30px align="left" valign="center"><a  href=ex165.html#e165 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><i>WI</i></div></a></TD></TR></TABLE></td></tr></table>
<!-- EXAMPLE START -->
<a name="e264"><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><td halign="left" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="oval"><TD width=38px height=30px align="left" valign="center"><a href=Rdoc31.html#e264 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><b>269</b></div></a></TD></TR></TABLE></td><td CELLPADDING=0 CELLSPACING=0 halign="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><a href=Rdoc31.html#e264 STYLE="text-decoration: none"><img border="0" style="height: 15px; width: 13px;" alt="*" src='../doc_images/asterisk.png'><img border="0" style="height: 15px; width: 13px;" alt="*" src='../doc_images/asterisk.png'><img border="0" style="height: 15px; width: 13px;" alt="*" src='../doc_images/asterisk.png'><b><font color="#505050">&nbsp;<b>Example</b>&nbsp;</font> <font color="#000000"> The Left Hand of Autumn</font></b></a><br>The possibility of using a [things] token opens up some interesting complications, because we may want actions on multiple items to be reported differently from actions on just one. Here we look at how to make a multiple examination command that describes groups in special ways.<p></td><td halign="right" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="wiarrow"><TD width=38px height=30px align="left" valign="center"><a  href=ex264.html#e264 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><i>WI</i></div></a></TD></TR></TABLE></td></tr></table>
<table border=0 bgcolor="#ffffc0" width=100%><tr><td><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2>
<p>
<p>Suppose that we have a game in which groups of objects can have meaning apart from their individual significance -- perhaps there are spells that can only be cast by collecting just the right items in the same place.
<p>
<p>In this case, one of the things the player might like to be able to do is look at several items together and get a special response, different from looking at the items individually.
<p>
<p>To make this happen, we need to do several things:
<p>
<blockquote><font color="#000080">(1) we need to create a version of the EXAMINE command that can apply to multiple objects at once.
<br>(2) we need to correct the way Inform normally deals with multiple-object commands, because we want our group description to print only one time, and we want to avoid stubs such as &quot;pear: ... apple: ...&quot; before or after the group description.
<br>(3) we need to define a way for Inform to identify interesting groups and describe them.
</font></blockquote><p>
<p>
<blockquote><font color="#000080"><script language="JavaScript">
function pasteCode796(code) {
    var myProject = external.Project;

    myProject.selectView('source');
    myProject.pasteCode('[=0x0022=]The Left Hand of Autumn[=0x0022=][=0x000A=][=0x000A=]Section 1 - Procedure[=0x000A=][=0x000A=]Understand [=0x0022=]examine [things][=0x0022=] or [=0x0022=]look at [things][=0x0022=] as multiply-examining. Multiply-examining is an action applying to one thing.[=0x000A=][=0x000A=]Understand [=0x0022=]examine [things inside] in/on [something][=0x0022=] or [=0x0022=]look at [things inside] in/on [something][=0x0022=] as multiply-examining it from. Multiply-examining it from is an action applying to two things.[=0x000A=][=0x000A=]Group-description-complete is a truth state that varies.[=0x000A=][=0x000A=]Carry out multiply-examining it from:[=0x000A=][=0x0009=]try multiply-examining the noun instead.[=0x000A=][=0x000A=]Check multiply-examining when group-description-complete is true:[=0x000A=][=0x0009=]stop the action.[=0x000A=][=0x000A=]Carry out multiply-examining:[=0x000A=][=0x0009=]let L be the list of matched things;[=0x000A=][=0x0009=]if the number of entries in L is 0, try examining the noun instead;[=0x000A=][=0x0009=]if the number of entries in L is 1, try examining entry 1 of L instead;[=0x000A=][=0x0009=]describe L;[=0x000A=][=0x0009=]say line break;[=0x000A=][=0x0009=]now group-description-complete is true.[=0x000A=][=0x000A=]Before reading a command:[=0x000A=][=0x0009=]now group-description-complete is false.[=0x000A=][=0x000A=][Now for step 2, overriding Inform[=0x0027=]s usual output of names of objects:][=0x000A=][=0x000A=]The silently announce items from multiple object lists rule is listed instead of the announce items from multiple object lists rule in the action-processing rules.[=0x000A=][=0x000A=]This is the silently announce items from multiple object lists rule:[=0x000A=][=0x0009=]unless multiply-examining or multiply-examining something from something:[=0x000A=][=0x0009=][=0x0009=]if the current item from the multiple object list is not nothing, say [=0x0022=][current item from the multiple object list]: [run paragraph on][=0x0022=].[=0x000A=][=0x000A=]Definition: a thing is matched if it is listed in the multiple object list.[=0x000A=][=0x000A=][We[=0x0027=]ll save our [=0x0022=]to describe[=0x0022=] phrase until Section 2, when we can give the game specific instructions about how to report different lists of objects.][=0x000A=][=0x000A=][Now, the player might also want to be able to refer to a group of item by some kind of group name, so let[=0x0027=]s add the option of creating a Table of Collective Names which will interpret these:][=0x000A=][=0x000A=]After reading a command:[=0x000A=][=0x0009=]repeat through the Table of Collective Names:[=0x000A=][=0x0009=][=0x0009=]let N be indexed text;[=0x000A=][=0x0009=][=0x0009=]let N be the player[=0x0027=]s command;[=0x000A=][=0x0009=][=0x0009=]let Y be indexed text;[=0x000A=][=0x0009=][=0x0009=]let Y be relevant list entry;[=0x000A=][=0x0009=][=0x0009=]while N matches the regular expression [=0x0022=][name-text entry][=0x0022=], replace the regular expression [=0x0022=](.*)[name-text entry](.*)[=0x0022=] in N with [=0x0022=][=0x005C=]1[Y][=0x005C=]2[=0x0022=];[=0x000A=][=0x0009=][=0x0009=]change the text of the player[=0x0027=]s command to N.[=0x000A=][=0x000A=][=0x000A=]Report taking something:[=0x000A=][=0x0009=]say [=0x0022=]You pick up [the noun].[=0x0022=] instead.[=0x000A=][=0x000A=][And as a bit of polish, because we[=0x0027=]d like SEARCH TABLE to have the same effect as EXAMINE ALL ON TABLE:][=0x000A=][=0x000A=]Understand [=0x0022=]look on [something][=0x0022=] as searching.[=0x000A=][=0x000A=]Instead of searching something which supports at least two things:[=0x000A=][=0x0009=]let L be the list of things supported by the noun;[=0x000A=][=0x0009=]describe L.[=0x000A=]Instead of searching something which contains at least two things:[=0x000A=][=0x0009=]let L be the list of things contained by the noun;[=0x000A=][=0x0009=]describe L.[=0x000A=][=0x000A=]Section 2 - Scenario[=0x000A=][=0x000A=]Eight-Walled Chamber is a room. [=0x0022=]A perfectly octagonal room whose walls are tinted in various hues.[=0x0022=][=0x000A=][=0x000A=]The display table is a supporter in the Chamber. A twig of rowan wood is on the table.[=0x000A=][=0x000A=]The player carries an apple and a pear.[=0x000A=][=0x000A=]A glove is a kind of thing. A glove is always wearable. Understand [=0x0022=]glove[=0x0022=] as a glove. The player carries a left glove and a right glove. The left glove and the right glove are gloves.[=0x000A=][=0x000A=][Now we define a few actual lists of items:][=0x000A=][=0x000A=]Fruit list is a list of objects which varies. Fruit list is { apple, pear }.[=0x000A=]Glove list is a list of objects which varies. Glove list is { right glove, left glove }.[=0x000A=]Arcane list is a list of objects which varies. Arcane list is { left glove, twig, pear }.[=0x000A=][=0x000A=]To describe (L - a list of objects):[=0x000A=][=0x0009=]sort L;[=0x000A=][=0x0009=]if L is fruit list:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]Just a couple of fruits.[=0x0022=];[=0x000A=][=0x0009=]otherwise if L is glove list:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]It[=0x0027=]s a matched pair of fuzzy blue gloves.[=0x0022=];[=0x000A=][=0x0009=]otherwise if L is arcane list:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]To anyone else it might look like a random collection of objects, but these three things -- [L with definite articles] -- constitute a mystic key known as the Left Hand of Autumn. They practically hum with power.[=0x0022=];[=0x000A=][=0x0009=]otherwise:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]You see [L with indefinite articles].[=0x0022=][=0x000A=][=0x000A=]When play begins:[=0x000A=][=0x0009=]sort fruit list;[=0x000A=][=0x0009=]sort glove list;[=0x000A=][=0x0009=]sort the arcane list.[=0x000A=][=0x000A=][We sort the lists so that regardless of how we change the rest of the code (and the order in which objects are coded), the resulting list will always be in sorted order and ready to compare with the list of items the player wants to look at. And thanks to the [=0x0022=]Reading a command[=0x0022=] code we wrote earlier, we can also teach the game to understand the player[=0x0027=]s references to [=0x0022=]the left hand of autumn[=0x0022=] as a specific collection of items.][=0x000A=][=0x000A=]Table of Collective Names[=0x000A=]name-text[=0x0009=]relevant list (indexed text)[=0x000A=][=0x0022=]left hand of autumn[=0x0022=][=0x0009=][=0x0022=][arcane list][=0x0022=][=0x000A=][=0x0022=]gloves[=0x0022=][=0x0009=][=0x0022=][glove list][=0x0022=][=0x000A=][=0x0022=]pair of gloves[=0x0022=][=0x0009=][=0x0022=][glove list][=0x0022=][=0x000A=][=0x000A=]Test me with [=0x0022=]x apple and pear / x left and right / put pear on table / put left glove on table / x all on table / put all on table / examine all on table / get apple, twig, pear / x all on table / search table[=0x0022=].[=0x000A=]');
}
</script>
<a href="javascript:pasteCode796()"><img border=0 src=../doc_images/paste.png></a> &quot;The Left Hand of Autumn&quot;
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Section 1 - Procedure
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Understand &quot;examine [things]&quot; or &quot;look at [things]&quot; as multiply-examining. Multiply-examining is an action applying to one thing.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Understand &quot;examine [things inside] in/on [something]&quot; or &quot;look at [things inside] in/on [something]&quot; as multiply-examining it from. Multiply-examining it from is an action applying to two things.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Group-description-complete is a truth state that varies.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Carry out multiply-examining it from:
<br>&nbsp;&nbsp;&nbsp;&nbsp;try multiply-examining the noun instead.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Check multiply-examining when group-description-complete is true:
<br>&nbsp;&nbsp;&nbsp;&nbsp;stop the action.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Carry out multiply-examining:
<br>&nbsp;&nbsp;&nbsp;&nbsp;let L be the list of matched things;
<br>&nbsp;&nbsp;&nbsp;&nbsp;if the number of entries in L is 0, try examining the noun instead;
<br>&nbsp;&nbsp;&nbsp;&nbsp;if the number of entries in L is 1, try examining entry 1 of L instead;
<br>&nbsp;&nbsp;&nbsp;&nbsp;describe L;
<br>&nbsp;&nbsp;&nbsp;&nbsp;say line break;
<br>&nbsp;&nbsp;&nbsp;&nbsp;now group-description-complete is true.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Before reading a command:
<br>&nbsp;&nbsp;&nbsp;&nbsp;now group-description-complete is false.
</font></blockquote><p>
<p>
<p>Now for step 2, overriding Inform's usual output of names of objects:
<p>
<blockquote><font color="#000080">The silently announce items from multiple object lists rule is listed instead of the announce items from multiple object lists rule in the action-processing rules.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">This is the silently announce items from multiple object lists rule:
<br>&nbsp;&nbsp;&nbsp;&nbsp;unless multiply-examining or multiply-examining something from something:
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if the current item from the multiple object list is not nothing, say &quot;[current item from the multiple object list]: [run paragraph on]&quot;.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Definition: a thing is matched if it is listed in the multiple object list.
</font></blockquote><p>
<p>
<p>We'll save our &quot;to describe&quot; phrase until Section 2, when we can give the game specific instructions about how to report different lists of objects.
<p>
<p>Now, the player might also want to be able to refer to a group of item by some kind of group name, so let's add the option of creating a Table of Collective Names which will interpret these:
<p>
<blockquote><font color="#000080">After reading a command:
<br>&nbsp;&nbsp;&nbsp;&nbsp;repeat through the Table of Collective Names:
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let N be indexed text;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let N be the player's command;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let Y be indexed text;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let Y be relevant list entry;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while N matches the regular expression &quot;[name-text entry]&quot;, replace the regular expression &quot;(.*)[name-text entry](.*)&quot; in N with &quot;\1[Y]\2&quot;;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;change the text of the player's command to N.
</font></blockquote><p>
<p>
<p>
<blockquote><font color="#000080">Report taking something:
<br>&nbsp;&nbsp;&nbsp;&nbsp;say &quot;You pick up [the noun].&quot; instead.
</font></blockquote><p>
<p>
<p>And as a bit of polish, because we'd like SEARCH TABLE to have the same effect as EXAMINE ALL ON TABLE:
<p>
<blockquote><font color="#000080">Understand &quot;look on [something]&quot; as searching.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Instead of searching something which supports at least two things:
<br>&nbsp;&nbsp;&nbsp;&nbsp;let L be the list of things supported by the noun;
<br>&nbsp;&nbsp;&nbsp;&nbsp;describe L.
<br>Instead of searching something which contains at least two things:
<br>&nbsp;&nbsp;&nbsp;&nbsp;let L be the list of things contained by the noun;
<br>&nbsp;&nbsp;&nbsp;&nbsp;describe L.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Section 2 - Scenario
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Eight-Walled Chamber is a room. &quot;A perfectly octagonal room whose walls are tinted in various hues.&quot;
</font></blockquote><p>
<p>
<blockquote><font color="#000080">The display table is a supporter in the Chamber. A twig of rowan wood is on the table.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">The player carries an apple and a pear.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">A glove is a kind of thing. A glove is always wearable. Understand &quot;glove&quot; as a glove. The player carries a left glove and a right glove. The left glove and the right glove are gloves.
</font></blockquote><p>
<p>
<p>Now we define a few actual lists of items:
<p>
<blockquote><font color="#000080">Fruit list is a list of objects which varies. Fruit list is { apple, pear }.
<br>Glove list is a list of objects which varies. Glove list is { right glove, left glove }.
<br>Arcane list is a list of objects which varies. Arcane list is { left glove, twig, pear }.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">To describe (L - a list of objects):
<br>&nbsp;&nbsp;&nbsp;&nbsp;sort L;
<br>&nbsp;&nbsp;&nbsp;&nbsp;if L is fruit list:
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;say &quot;Just a couple of fruits.&quot;;
<br>&nbsp;&nbsp;&nbsp;&nbsp;otherwise if L is glove list:
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;say &quot;It's a matched pair of fuzzy blue gloves.&quot;;
<br>&nbsp;&nbsp;&nbsp;&nbsp;otherwise if L is arcane list:
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;say &quot;To anyone else it might look like a random collection of objects, but these three things -- [L with definite articles] -- constitute a mystic key known as the Left Hand of Autumn. They practically hum with power.&quot;;
<br>&nbsp;&nbsp;&nbsp;&nbsp;otherwise:
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;say &quot;You see [L with indefinite articles].&quot;
</font></blockquote><p>
<p>
<blockquote><font color="#000080">When play begins:
<br>&nbsp;&nbsp;&nbsp;&nbsp;sort fruit list;
<br>&nbsp;&nbsp;&nbsp;&nbsp;sort glove list;
<br>&nbsp;&nbsp;&nbsp;&nbsp;sort the arcane list.
</font></blockquote><p>
<p>
<p>We sort the lists so that regardless of how we change the rest of the code (and the order in which objects are coded), the resulting list will always be in sorted order and ready to compare with the list of items the player wants to look at. And thanks to the &quot;Reading a command&quot; code we wrote earlier, we can also teach the game to understand the player's references to &quot;the left hand of autumn&quot; as a specific collection of items.
<p>
<blockquote><font color="#000080">Table of Collective Names
<br><table border="0" valign="top" cellpadding="0" cellspacing="0"><tr><td valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2 color="#000080">name-text</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2 color="#000080">relevant list (indexed text)</font>&nbsp;&nbsp;&nbsp;</td>
</tr><tr><td valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2 color="#000080">&quot;left hand of autumn&quot;</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2 color="#000080">&quot;[arcane list]&quot;</font>&nbsp;&nbsp;&nbsp;</td>
</tr><tr><td valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2 color="#000080">&quot;gloves&quot;</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2 color="#000080">&quot;[glove list]&quot;</font>&nbsp;&nbsp;&nbsp;</td>
</tr><tr><td valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2 color="#000080">&quot;pair of gloves&quot;</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2 color="#000080">&quot;[glove list]&quot;</font>&nbsp;&nbsp;&nbsp;</td>
</tr></table>
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Test me with &quot;x apple and pear / x left and right / put pear on table / put left glove on table / x all on table / put all on table / examine all on table / get apple, twig, pear / x all on table / search table&quot;.
</font></blockquote><p>
<table CELLPADDING=0 CELLSPACING=0 width="100%" height=18><tr><td width="100%"> </td><td width=18 align="left" bgcolor="#000000"><a href=Rdoc31.html><img src=../doc_images/Hookclose.png id="hookclose" style="height: 17px; width: 17px;" border="0"></a></td><td width=4></td></tr></table></td></tr></table><p>
<!-- EXAMPLE END -->
<a name="e107"><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><td halign="left" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="oval"><TD width=38px height=30px align="left" valign="center"><a href=Rex107.html#e107 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><b>64</b></div></a></TD></TR></TABLE></td><td CELLPADDING=0 CELLSPACING=0 halign="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><a href=Rex107.html#e107 STYLE="text-decoration: none"><img border="0" style="height: 15px; width: 13px;" alt="*" src='../doc_images/asterisk.png'><img border="0" style="height: 15px; width: 13px;" alt="*" src='../doc_images/asterisk.png'><b><font color="#505050">&nbsp;Example&nbsp;</font> <font color="#000000"> Beekeeper's Apprentice</font></b></a><br>Making the SEARCH command examine all the scenery in the current location.<p></td><td halign="right" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="wiarrow"><TD width=38px height=30px align="left" valign="center"><a  href=ex107.html#e107 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><i>WI</i></div></a></TD></TR></TABLE></td></tr></table>
<p><hr><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><td width="33%" align="left"><a href=Rdoc30.html border=0 STYLE="text-decoration: none"><font color="808080" size="2">Previous</font></a></td><td width="33%" align="center"><a href=../Rindex.html border=0 STYLE="text-decoration: none"><font color="808080" size="2">Contents</font></a></td><td width="33%" align="right"><a href=Rdoc32.html border=0 STYLE="text-decoration: none"><font color="808080" size="2">Next</font></a></td></tr></table></font></body></html>
